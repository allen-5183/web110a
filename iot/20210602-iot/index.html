<!DOCTYPE HTML>
<html lang="zh-CN">



<head>
    <meta charset="utf-8">
    <meta name="keywords" content="ç‰©è¯ç¶²ç¶œåˆæ‡‰ç”¨(äºŒ), å€‹äººåšå®¢ å‘†å‘† å­¸ç¿’ Allen">
    <meta name="description" content="ç¶²é æŠ€è¡“| ç‰©è¯ç¶²æ‡‰ç”¨ | AI æ™ºèƒ½">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>ç‰©è¯ç¶²ç¶œåˆæ‡‰ç”¨(äºŒ) | å‘†å‘†-åšå®¢</title>
    <link rel="icon" type="image/gif" href="/medias/diamond.gif">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loaderé¡µé¢æ¶ˆå¤±é‡‡ç”¨æ¸éšçš„æ–¹å¼*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }

    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }

   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: 
rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: 
rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: 
rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: 
rotate(90deg)}}

    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}


    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logoå‡ºç°åŠ¨ç”» */
    @-webkit-keyframes 
fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//ä½¿ç”¨æ¸éšçš„æ–¹æ³•æ·¡å‡ºloading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//å¼ºåˆ¶æ˜¾ç¤ºloading page 1s  
    };
    loaded();
})()
 </script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="å‘†å‘†-åšå®¢" type="application/atom+xml">
</head>


<script src="/js/instant.page.js" type="module"></script>

<script type="text/javascript">
var OriginTitile=document.title,st;
document.addEventListener("visibilitychange",function(){document.hidden?(document.title="çœ‹ä¸è¦‹æˆ‘ğŸ™ˆ~çœ‹ä¸è¦‹æˆ‘ğŸ™ˆ~",clearTimeout(st)):(document.title=" è¢«ç™¼ç¾äº†ï½",st=setTimeout(function(){document.title=OriginTitile},3e3))})</script>

<script type="text/javascript">
  //åªåœ¨æ¡Œä¸Šå‡ºç‰ˆç¶²é å•Ÿç”¨ç‰¹æ•ˆ
  var windowWidth = $(window).width();
  if (windowWidth > 768) {
    //é›ªèŠ±ç‰¹æ•ˆ
    document.write('<script type="text/javascript" src="/js/xuehuapiaoluo.js"><\/script>');
    //æ«»èŠ±ç‰¹æ•ˆ
    //document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>');
    //ç„¡æ•ˆ 
    //document.write('<script type="text/javascript" src="/js/xingxing.js"><\/script>');
    //æ»‘é¼ é»æ“Šæ–‡å­—ç‰¹æ•ˆã€‚(â¤å¯Œå¼·â¤,â¤æ°‘ä¸»â¤,â¤æ–‡æ˜â¤,â¤å’Œè«§â¤,â¤è‡ªç”±â¤,â¤å¹³ç­‰â¤,â¤å…¬æ­£â¤,â¤æ³•æ²»â¤,â¤æ„›åœ‹â¤,â¤æ•¬æ¥­â¤,â¤èª ä¿¡â¤,â¤å‹å–„â¤);)
    //document.write('<script type="text/javascript" src="/js/wenzi.js"><\/script>');

  }
</script>



 <div id="loading-container">
     <p class="loading-text">åŠªåŠ›åŠ è¼‰ä¸­ . . . </p> 
     <div class="loading-image">
         <div></div>
         <div></div>
         <div></div>
         <div></div> 
         <div></div>
     </div>
 </div><body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/loading.gif" data-original="/medias/diamond.gif" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">å‘†å‘†-åšå®¢</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>é¦–é </span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>é—œæ–¼</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>ç•™è¨€æ¿</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>å‹æƒ…é€£çµ</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-meh-rolling-eyes" style="zoom: 0.6;"></i>
      
      <span>æ”¶ç´æ«ƒ</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/tags">
          
          <i class="fas fa-tags" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>æ¨™ç±¤</span>
        </a>
      </li>
      
      <li>
        <a href="/categories">
          
          <i class="fas fa-bookmark" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>åˆ†é¡</span>
        </a>
      </li>
      
      <li>
        <a href="/archives">
          
          <i class="fas fa-archive" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>æ­¸æª”</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>åª’é«”</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/movie">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>é›»å½±</span>
        </a>
      </li>
      
      <li>
        <a href="/video">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>è¦–é »</span>
        </a>
      </li>
      
      <li>
        <a href="/galleries">
          
          <i class="fas fa-image" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>ç›¸å†Š</span>
        </a>
      </li>
      
      <li>
        <a href="/books">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>æ›¸ç±</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="æœç´¢" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/loading.gif" data-original="/medias/diamond.gif" class="logo-img circle responsive-img">
        
        <div class="logo-name">å‘†å‘†-åšå®¢</div>
        <div class="logo-desc">
            
            ç¶²é æŠ€è¡“| ç‰©è¯ç¶²æ‡‰ç”¨ | AI æ™ºèƒ½
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			é¦–é 
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			é—œæ–¼
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			ç•™è¨€æ¿
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			å‹æƒ…é€£çµ
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-meh-rolling-eyes"></i>
			
			æ”¶ç´æ«ƒ
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/tags " style="margin-left:75px">
				  
				   <i class="fa fas fa-tags" style="position: absolute;left:50px" ></i>
			      
		          <span>æ¨™ç±¤</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories " style="margin-left:75px">
				  
				   <i class="fa fas fa-bookmark" style="position: absolute;left:50px" ></i>
			      
		          <span>åˆ†é¡</span>
                  </a>
                </li>
              
                <li>

                  <a href="/archives " style="margin-left:75px">
				  
				   <i class="fa fas fa-archive" style="position: absolute;left:50px" ></i>
			      
		          <span>æ­¸æª”</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			åª’é«”
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/movie " style="margin-left:75px">
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>é›»å½±</span>
                  </a>
                </li>
              
                <li>

                  <a href="/video " style="margin-left:75px">
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>è¦–é »</span>
                  </a>
                </li>
              
                <li>

                  <a href="/galleries " style="margin-left:75px">
				  
				   <i class="fa fas fa-image" style="position: absolute;left:50px" ></i>
			      
		          <span>ç›¸å†Š</span>
                  </a>
                </li>
              
                <li>

                  <a href="/books " style="margin-left:75px">
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>æ›¸ç±</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('è«‹è¼¸å…¥è¨ªå•æœ¬æ–‡ç« çš„å¯†ç¢¼')).toString(CryptoJS.enc.Hex)) {
                alert('å¯†ç¢¼éŒ¯èª¤ï¼Œå°‡è¿”å›ä¸»é ï¼');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/14.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title"></h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å…§å®¹è©³æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/iot/">
                                <span class="chip bg-color">iot</span>
                            </a>
                        
                            <a href="/tags/wiot/">
                                <span class="chip bg-color">wiot</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/iot/" class="post-category">
                                iot
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>ç™¼ä½ˆæ—¥æœŸ:&nbsp;&nbsp;
                    2021-06-02
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="0-èª²ç¨‹æº–å‚™"><a href="#0-èª²ç¨‹æº–å‚™" class="headerlink" title="0. èª²ç¨‹æº–å‚™"></a>0. èª²ç¨‹æº–å‚™</h2><ol>
<li><a target="_blank" rel="noopener" href="https://drive.google.com/drive/folders/1YhOhREq4PmGqmGdS4rLc_dzmm0w92UTs?usp=sharing">é›²ç«¯ç¡¬ç¢Ÿ</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/embed/zvrGOu8QFSo">ç”Ÿæ´»æ™ºæ…§å±‹å±•ç¤º</a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/zvrGOu8QFSo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></li>
<li><a target="_blank" rel="noopener" href="https://drive.google.com/file/d/1EYgZEVWCqUnCRPuZ4-5JPg1hLfFeTPQs/view?usp=sharing">è¬›ç¾©</a></li>
</ol>
<h2 id="1-ç¡¬é«”å»ºç½®"><a href="#1-ç¡¬é«”å»ºç½®" class="headerlink" title="1. ç¡¬é«”å»ºç½®"></a>1. ç¡¬é«”å»ºç½®</h2><h3 id="1-1-é…ç·šåœ–"><a href="#1-1-é…ç·šåœ–" class="headerlink" title="1.1 é…ç·šåœ–"></a>1.1 é…ç·šåœ–</h3><ul>
<li><p>æ¨¹è“æ´¾è…³ä½åœ–</p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210602102127.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210602102127_s.png" class="nofancybox  img-center"></a></p>
</li>
<li><p>æ¨¹è“æ´¾èˆ‡å…¶ä»–è£ç½®é€£æ¥è…³ä½åœ–</p>
<table>
<thead>
<tr>
<th align="left">PI3 B+ è…³ä½</th>
<th align="left">PI3 B+ åŠŸèƒ½æè¿°</th>
<th align="left">å…¶ä»–è£ç½®è…³ä½</th>
</tr>
</thead>
<tbody><tr>
<td align="left">PI3 B+ 18</td>
<td align="left">GPIO 24</td>
<td align="left">Buzzer I/O</td>
</tr>
<tr>
<td align="left">PI3 B+ 2</td>
<td align="left">5V Power</td>
<td align="left">Buzzer VCCã€SG 900 VCC(ç´…)</td>
</tr>
<tr>
<td align="left">PI3 B+ 6</td>
<td align="left">GND</td>
<td align="left">Buzzer GNDã€SG 900 GND(è¤)</td>
</tr>
<tr>
<td align="left">PI3 B+ 11</td>
<td align="left">GPIO 17</td>
<td align="left">DHT 11 Out</td>
</tr>
<tr>
<td align="left">PI3 B+ 4</td>
<td align="left">5V Power</td>
<td align="left">DHT +</td>
</tr>
<tr>
<td align="left">PI3 B+ 20</td>
<td align="left">GND</td>
<td align="left">DHT -</td>
</tr>
<tr>
<td align="left">PI3 B+ 12</td>
<td align="left">GPIO 18 PCM_CLK</td>
<td align="left">SG 900 è¨Šè™Ÿ(æ©˜)</td>
</tr>
<tr>
<td align="left">PI3 B+ 37</td>
<td align="left">GPIO 26</td>
<td align="left">RELAY IN1</td>
</tr>
<tr>
<td align="left">PI3 B+ 13</td>
<td align="left">GPIO 27</td>
<td align="left">RELAY IN2</td>
</tr>
<tr>
<td align="left">PI3 B+ 15</td>
<td align="left">GPIO 22</td>
<td align="left">RELAY IN3</td>
</tr>
<tr>
<td align="left">PI3 B+ 16</td>
<td align="left">GPIO 23</td>
<td align="left">RELAY IN4</td>
</tr>
<tr>
<td align="left">PI3 B+ 24</td>
<td align="left">GPIO  8 SPIO_CE0_N</td>
<td align="left">RFID RC522 SDA</td>
</tr>
<tr>
<td align="left">PI3 B+ 23</td>
<td align="left">GPIO 11 SPIO_SCLK</td>
<td align="left">RFID RC522 SCK</td>
</tr>
<tr>
<td align="left">PI3 B+ 19</td>
<td align="left">GPIO 10 SPIO_MOSI</td>
<td align="left">RFID RC522 MOSI</td>
</tr>
<tr>
<td align="left">PI3 B+ 21</td>
<td align="left">GPIO  9 SPIO_MISO</td>
<td align="left">RFID RC522 MISO</td>
</tr>
<tr>
<td align="left">PI3 B+ 25</td>
<td align="left">GND</td>
<td align="left">RFID RC522 GND</td>
</tr>
<tr>
<td align="left">PI3 B+ 22</td>
<td align="left">GPIO 25</td>
<td align="left">RFID RC522 RST</td>
</tr>
<tr>
<td align="left">PI3 B+ 17</td>
<td align="left">3V3 Power</td>
<td align="left">RFID RC522 3.3V</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="1-2-ç¶²è·¯è¨­å®šåƒè€ƒ"><a href="#1-2-ç¶²è·¯è¨­å®šåƒè€ƒ" class="headerlink" title="1.2 ç¶²è·¯è¨­å®šåƒè€ƒ"></a>1.2 ç¶²è·¯è¨­å®šåƒè€ƒ</h3><p>æœ‰å…©è™•å¯ä»¥ä¿®æ­£ç¶²å¡è¨­å®šï¼Œæ“‡ä¸€ä¾†è¨­å®šï¼Œç¬¬ä¸€ç¨®æ–¹æ³•æœƒå„ªå…ˆã€‚</p>
<ol>
<li><p><code>sudo nano /etc/dhcpcd.cong</code></p>
</li>
<li><p><code>sudo nano /etc/network/interfaces</code></p>
<pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">#è¡¨ç¤ºä½¿ç”¨ localhost
auto lo 
# æœ‰ç¶²è·¯å¡ eth0ï¼Œå‰‡ç”¨éœæ…‹æ–¹å¼è¨­å®š IP:
iface eth0 inet static
static ip_address=192.168.57.40
static routers=192.168.57.254
static domain_name_servers=8.8.8.8 168.95.1.1
  
# DHCP
#iface eth0 inet dhcp
# æœ‰ç¶²è·¯å¡ eth0ï¼Œå‰‡ä½¿ç”¨ dhcp ç²å– IP:
#static domain_name_servers=8.8.#8.8 168.95.1.1

# Wifi
#auto wlan0 #æœ‰ WLAN ä½¿ç”¨ wlan0 è£ç½®åç¨±
#wlanè£ç½®å¯ä»¥ç†±æ‹”æ’
#allow-hotplug wlan0
#æœ‰WLAN ç¶²è·¯æ™‚ï¼Œä½¿ç”¨ wpa-psk èªè­‰æ–¹å¼
#iface wlan0 inet dhcp
#wpa-ssid "yvts"
#wpa-psk  "yvtsyvts"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>é‡æ–°å•Ÿå‹•</strong><br><code>sudo /etc/init.d/networking restart</code></p>
</li>
</ol>
<h2 id="2-ç’°å¢ƒè¨­ç½®"><a href="#2-ç’°å¢ƒè¨­ç½®" class="headerlink" title="2. ç’°å¢ƒè¨­ç½®"></a>2. ç’°å¢ƒè¨­ç½®</h2><h3 id="2-1-SSH-å…å¯†ç¢¼ç™»å…¥"><a href="#2-1-SSH-å…å¯†ç¢¼ç™»å…¥" class="headerlink" title="2.1 SSH å…å¯†ç¢¼ç™»å…¥"></a>2.1 SSH å…å¯†ç¢¼ç™»å…¥</h3><ol>
<li><p>ä½¿ç”¨ç³»çµ±ç®¡ç†è€…æ¬Šé™ï¼Œä¿®æ”¹æª”æ¡ˆ <code>c:\windows\system32\drivers\etc\hosts</code></p>
<p>å¢åŠ ä¸€ç­†è³‡æ–™å¦‚ä¸‹:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">192.168</span>.xxx.xxx    smarthome.edu.tw<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>æ¸¬è©¦:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ping</span> smarthome.edu.tw<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>æœ¬æ©Ÿç«¯(Window)ï¼Œå®‰è£ <a target="_blank" rel="noopener" href="https://git-scm.com/downloads">Git</a> </p>
</li>
<li><p>è¨­å®šè­˜åˆ¥è³‡æ–™, ä½¿ç”¨ <code>Git bash</code> é–‹å•Ÿçµ‚ç«¯æ©Ÿè¦–çª—å¾Œï¼ŒåŸ·è¡Œå¦‚ä¸‹å‘½ä»¤:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --global user.name  <span class="token string">"John Doe"</span>
<span class="token function">git</span> config --global user.email  johndoe@example.com

<span class="token comment">#æŒ‡å®šç·¨è¼¯å™¨</span>
<span class="token function">git</span> config --global core.editor <span class="token string">"'C:/Program Files (x86)/Notepad++/notepad++.exe' -multiInst -nosession"</span>
<span class="token comment">#or</span>
<span class="token function">git</span> config --global core.editor <span class="token string">"'C:/tools/nano.exe' -multiInst -nosession"</span>   
<span class="token function">git</span> config --list<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>é…ç½® <code>sshd</code> æœå‹™ï¼Œå…è¨±èªè­‰é‡‘é‘°æª”æ¡ˆ:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#ç™»å…¥ PI</span>
<span class="token function">ssh</span> pi@smarthome.edu.tw
<span class="token comment">#ä¿®æ”¹ SSH Daemon æœå‹™çµ„æ…‹æª”</span>
<span class="token function">sudo</span> <span class="token function">nano</span> /etc/ssh/sshd_config
<span class="token comment"># å°‡æœ€å‰é¢çš„è¨»è§£ç¬¦è™Ÿ `#` å–æ¶ˆæ‰ï¼Œå¦‚ä¸‹</span>
  AuthorizedKeysFile      .ssh/authorized_keys<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>åœ¨å®šæ™‚å‚™ä»½æˆ–æ‰¹æ¬¡é ç«¯è™•ç†ï¼Œå¾€å¾€éœ€è¦å…å¯†ç¢¼ç™»å…¥é ç«¯ä¸»æ©Ÿå·¥ä½œã€‚ç‚ºé”æ­¤ç›®çš„ï¼Œé¦–å…ˆå¿…é ˆåœ¨ client ç«¯ç”¢ç”Ÿä¸€çµ„ keyï¼ŒåŒ…å«å…¬é–‹é‡‘é‘°ï¼ˆPublic Keyï¼‰èˆ‡ç§å¯†é‡‘é‘°ï¼ˆPrivate Keyï¼‰ï¼Œå°‡å…¬é‘°é€åˆ°è¦ç™»å…¥çš„ä¸»æ©Ÿï¼Œç›¸äº’å°æ‡‰åšå…å¯†ç¢¼çš„ç™»å…¥ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#æª¢æŸ¥æœ‰ç„¡ç§é‘°èˆ‡å…¬é‘°(æœ¬æ©Ÿç«¯ PC)</span>
<span class="token function">ls</span> -al ~/.ssh/id_rsa.pub
<span class="token function">ls</span> -al ~/.ssh/id_rsa
<span class="token comment">#è‹¥æ²’æœ‰é‡‘é‘°çš„è©±ï¼Œkey çš„ç”¢ç”Ÿæ–¹æ³•ï¼š</span>
ssh-keygen -t rsa -C xxx@gmail.com

Generating public/private rsa key pair.
Enter <span class="token function">file</span> <span class="token keyword">in</span> <span class="token function">which</span> to save the key <span class="token punctuation">(</span>/root/.ssh/id_rsa<span class="token punctuation">)</span>:
Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>:
Enter same passphrase again:
Your identification has been saved <span class="token keyword">in</span> /root/.ssh/id_rsa.
Your public key has been saved <span class="token keyword">in</span> /root/.ssh/id_rsa.pub.
The key fingerprint is:
c3:e9:25:65:00:c8:65:cb:e8:fe:4e:7e:ce:06:a4:9d root@kvm8.deyu.wang
The key's randomart image is:
+--<span class="token punctuation">[</span> RSA <span class="token number">2048</span><span class="token punctuation">]</span>----+
<span class="token operator">|</span>   <span class="token builtin class-name">.</span> o+<span class="token punctuation">..</span>        <span class="token operator">|</span>
<span class="token operator">|</span>    o+ <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>       <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token builtin class-name">.</span> o   o      <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token builtin class-name">.</span>  <span class="token punctuation">..</span> +       <span class="token operator">|</span>
<span class="token operator">|</span>    .+ .S <span class="token builtin class-name">.</span>      <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token punctuation">..</span> E. +       <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token builtin class-name">.</span> <span class="token punctuation">..</span>.        <span class="token operator">|</span>
<span class="token operator">|</span>     + .o        <span class="token operator">|</span>
<span class="token operator">|</span>     .++o        <span class="token operator">|</span>
+-----------------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>å°‡å…¬é–‹é‡‘é‘°æ”¾åˆ°è¦ç™»å…¥çš„ä¸»æ©Ÿä¸Šï¼Œåˆ©ç”¨ä»¥ä¸‹æŒ‡ä»¤å®Œæˆ:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ssh</span> pi@smarthome.edu.tw <span class="token string">'mkdir -p ~/.ssh; cat &gt;&gt; ~/.ssh/authorized_keys'</span> <span class="token operator">&lt;</span> ~/.ssh/id_rsa.pub<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>ç™»å…¥æ¸¬è©¦</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ssh</span> pi@smarthome.edu.tw<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<blockquote>
<p>ç‰¹åˆ¥æ³¨æ„ç›®éŒ„ .ssh åŠæª”æ¡ˆ authorized_keys çš„æ¬Šé™ï¼Œè‹¥ç¾¤çµ„æˆ–å…¶ä»–äººçš„æ¬Šé™éå¤§ï¼Œé™¤äº†å®‰å…¨æ€§æœ‰å•é¡Œå¤–ï¼Œä¹Ÿæœ‰å¯èƒ½å›  ssh åˆ¤æ–·è¦å°æ‡‰çš„é‡‘é‘°ä¸å®‰å…¨ï¼Œè€Œç„¡æ³•å°æ‡‰ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½å…å¯†ç¢¼ç™»å…¥ã€‚</p>
</blockquote>
</li>
<li><p>èª¿æ•´æ¬Šé™<br>è¨­å®š PI ä¸Šçš„authorized_keys å¯è®€ã€å¯«</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ssh</span> pi@smarthome.edu.tw <span class="token string">"chmod 600 ~/.ssh/authorized_keys"</span>
<span class="token comment"># è¨­å®š PI ä¸Šçš„authorized_keys å”¯è®€</span>
   <span class="token function">ssh</span> pi@smarthome.wda.edu.tw <span class="token string">"chmod 400 ~/.ssh/authorized_keys"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>å†ç°¡åŒ–ç™»å…¥ç¨‹åº: æœ¬æ©Ÿ PC ç«¯ï¼ŒåŠ å…¥ <code>config</code>, ç°¡åŒ– <code>ssh</code> ç™»å…¥æŒ‡ä»¤</p>
<ul>
<li><p>åœ¨ <code>~/.ssh</code> ä¸‹æ–°å¢ <code>config</code> æª”æ¡ˆï¼Œä¸éœ€ä»»ä½•å‰¯æª”åã€‚ </p>
</li>
<li><p>åœ¨æ–°å¢çš„æª”æ¡ˆè£¡åŠ ä¸Šä½ çš„ç¬¬ä¸€å€‹ SSH config</p>
<p><code>nano ~/.ssh/config</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Host pi                    <span class="token comment"># ç”¨ä¾†é€£ç·šçš„ alias åç¨±</span>
HostName smarthome.edu.tw  <span class="token comment"># host domain æˆ– ip</span>
Port <span class="token number">22</span>                    <span class="token comment"># host çš„ SSH port</span>
User pi                    <span class="token comment"># (é¸å¡«)ç™»å…¥ SSH çš„ usernameï¼Œ</span>
                           <span class="token comment">#  åªé€£ git çš„è©±ï¼Œå¯ä»¥ä¸å¿…è¦</span>
ForwardX11 <span class="token function">yes</span>             <span class="token comment"># (é¸å¡«) å•Ÿç”¨å›å‚³ GUI</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>æ¸¬è©¦<br><code>ssh pi</code>  </p>
</li>
</ul>
</li>
<li><p>å¸¸ç”¨ SSH æŒ‡ä»¤</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#åŸºæœ¬é€£ç·š</span>
<span class="token function">ssh</span> username@hostname<span class="token punctuation">[</span>ip<span class="token punctuation">]</span>  
<span class="token comment">#SSH é€£ç·šå†é™„åŠ å…¶ä»–æŒ‡ä»¤</span>
<span class="token function">ssh</span> pi <span class="token function">mkdir</span> <span class="token builtin class-name">test</span>
<span class="token comment">#scp æŒ‡å®š SSH name</span>
<span class="token function">scp</span> -r ./ pi:/var/www/html/project/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>æœ¬æ©Ÿé›»è…¦ç«¯è¨­å®š:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">d:
<span class="token builtin class-name">cd</span> d:<span class="token punctuation">\</span>xampp<span class="token punctuation">\</span>htdocs
   
<span class="token comment">#æ‰“é–‹ç¾è¡Œå·¥ä½œç›®éŒ„</span>
code <span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç„¶å¾Œåœ¨ <code>vscode</code> è¦–çª—ä¸‹å»ºç«‹ä¸€æ–°ç›®éŒ„ <code>smarthome</code>ï¼Œå°±å¯ä»¥é»æ“Šæ»‘é¼ å·¦éµï¼Œä¾†åŸ·è¡Œä¸‹è¼‰æ¨¹è“æ´¾æª”æ¡ˆã€‚</p>
</li>
<li><p>å®‰è£ vscode çš„å¥—ä»¶ <code>sftp</code><br>F1 æˆ– Ctrl+Shift+P, é¸æ“‡ SFTP:Config</p>
<p>åŠ å…¥ä»¥ä¸‹è¨­å®š:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>
   <span class="token punctuation">{</span>
       <span class="token builtin class-name">:</span>
   <span class="token punctuation">}</span> ,

   <span class="token punctuation">{</span>
    <span class="token string">"name"</span><span class="token builtin class-name">:</span> <span class="token string">"My Server"</span>,
    <span class="token string">"host"</span><span class="token builtin class-name">:</span> <span class="token string">"smarthome.edu.tw"</span>,
    <span class="token string">"protocol"</span><span class="token builtin class-name">:</span> <span class="token string">"sftp"</span>,
    <span class="token string">"port"</span><span class="token builtin class-name">:</span> <span class="token number">22</span>,
    <span class="token string">"username"</span><span class="token builtin class-name">:</span> <span class="token string">"pi"</span>,
    <span class="token string">"privateKeyPath"</span><span class="token builtin class-name">:</span> <span class="token string">"C:/Users/allen/.ssh/id_rsa"</span>,
    <span class="token string">"remotePath"</span><span class="token builtin class-name">:</span> <span class="token string">"/home/pi/www"</span>,
    <span class="token string">"uploadOnSave"</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</li>
</ol>
<h3 id="2-2-å®‰è£-Apache-MySQL-PHP"><a href="#2-2-å®‰è£-Apache-MySQL-PHP" class="headerlink" title="2.2 å®‰è£ Apache + MySQL+ PHP"></a>2.2 å®‰è£ <code>Apache + MySQL+ PHP</code></h3><ol>
<li><p>æ›´æ–°è»Ÿé«”å¥—ä»¶æ¸…å–®<br><code>sudo apt get update y</code></p>
</li>
<li><p>æ›´æ–°è»Ÿé«”å¥—ä»¶æœ¬èº«<br><code>sudo apt get upgrade y</code></p>
</li>
<li><p>é‡å•Ÿ<br><code>reboot</code></p>
</li>
</ol>
<h4 id="2-2-1-å®‰è£-Apache-PHP"><a href="#2-2-1-å®‰è£-Apache-PHP" class="headerlink" title="2.2.1 å®‰è£ Apache PHP"></a>2.2.1 å®‰è£ Apache PHP</h4><ol>
<li><p>å®‰è£è»Ÿé«”</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> get <span class="token function">install</span> apache2 y
<span class="token function">sudo</span> <span class="token function">apt</span> get <span class="token function">install</span> php y
<span class="token function">sudo</span> <span class="token function">apt</span> get <span class="token function">install</span> php mysql y
<span class="token function">sudo</span> <span class="token function">apt</span> get <span class="token function">install</span> php mbstring y
<span class="token function">sudo</span> systemctl restart apache2
<span class="token function">sudo</span> <span class="token function">nano</span> /etc/apache2 apache2.conf <span class="token comment">## è¨­å®šæ–‡ä»¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160012.png"><img src="/medias/loading.gif" data-original="small/20210601160012_s.png" class="nofancybox  img-center"></a></p>
<br>
<a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160111.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160111_s.png" class="nofancybox  img-center"></a>

<p><code>sudo nano /etc/ports.conf</code></p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160507.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160507_s.png" class="nofancybox  img-center"></a></p>
<p><strong>é‡å•Ÿä¼ºæœå™¨</strong><br><code>sudo systemctl restart apache2</code></p>
</li>
<li><p>é©—è­‰ <code>apache</code> æ­£å¸¸é‹ä½œï¼š</p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601161921.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601161921_s.png" class="nofancybox  img-center"></a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /var/www/html/
<span class="token function">sudo</span> <span class="token function">mv</span> index.html index1.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601162829.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601162829_s.png" class="nofancybox  img-center"></a></p>
</li>
<li><p>ä¿®æ”¹æ ¹ç›®éŒ„ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> -p /home/pi/www/web
<span class="token function">sudo</span> <span class="token function">chown</span> -R pi:www-data /home/pi/www/web
<span class="token function">chmod</span> -R <span class="token number">770</span> /home/pi/www/web
<span class="token function">sudo</span> <span class="token function">nano</span> /etc/apache2/apache2.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601165908.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601165908_s.png" class="nofancybox  img-center"></a></p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601165936.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601165936_s.png" class="nofancybox  img-center"></a></p>
<p><code>sudo nano /etc/apache2/sites-enabled/000-default.conf</code></p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601163545.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601163545_s.png" class="nofancybox  img-center"></a></p>
<blockquote>
<p>cd /etc/apache2/sites-available<br>  ln -s /etc/apache2/sites-enabled/000-default.conf<br>  sudo systemctl restart apache2</p>
</blockquote>
</li>
<li><p>åŠ å…¥è™›æ“¬æ–°ç¶²åŸŸ</p>
<ul>
<li><p>æ–°ç¶²åŸŸåç¨±: <code>smarthome.edu.tw</code></p>
</li>
<li><p>å»ºç«‹è³‡æ–™å¤¾: <code>mkdir ~/www/smarthome</code></p>
</li>
<li><p>ä¿®æ”¹ç¾æœ‰æª”æ¡ˆ: <code>nano /etc/apache2/sites-enabled/000-default.conf</code></p>
<pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">&lt;VirtualHost *:80&gt;
  ServerName smarthome.edu.tw
  #ServerAdmin webmaster@localhost
  DocumentRoot /home/pi/www/smarthome

  &lt;Directory /home/pi/www/smarthome&gt;
    Options indexes FollowSymLinks
    AllowOverride None
    Require all granted
  &lt;/Directory&gt;
&lt;/VirtualHost&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
</li>
<li><p>é‡å•Ÿ <code>Apache</code> ä¼ºæœå™¨<br><code>sudo systemctl restart apache2</code></p>
</li>
<li><p>é–‹å•Ÿ <code>PHP</code> éŒ¯èª¤æ—¥èªŒ<br><code>sudo nano /etc/php/7.0/apache2/php.ini</code></p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601163646.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601163646_s.png" class="nofancybox  img-center"></a></p>
</li>
</ol>
<h4 id="2-2-2-å®‰è£-MySQL"><a href="#2-2-2-å®‰è£-MySQL" class="headerlink" title="2.2.2 å®‰è£ MySQL"></a>2.2.2 å®‰è£ MySQL</h4><ul>
<li><p>å®‰è£<br><code>apt cache search mysql server</code><br><code>sudo apt get install mysql server</code></p>
</li>
<li><p>Setting MySQL/MariaDB root password  </p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> mysql u root p
mysql<span class="token operator">&gt;</span> use mysql<span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> update user <span class="token builtin class-name">set</span> <span class="token assign-left variable">plugin</span><span class="token operator">=</span><span class="token string">''</span> where u <span class="token assign-left variable">ser</span><span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span>

<span class="token punctuation">(</span>åˆ·æ–°æ¬Šé™ï¼Œç•¶ä½ ç›´æ¥é€šé update æ¬Šé™å¾Œï¼Œéœ€è¦é€šéåˆ·æ–°ä½¿ä½ çš„æˆæ¬Šæœ‰æ•ˆ<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token builtin class-name">exit</span>
<span class="token function">sudo</span> mysql_secure_installation
<span class="token function">sudo</span> mysql u root p<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601170430.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601170430_s.png" class="nofancybox  img-center"></a></p>
<p><a target="_blank" rel="noopener" href="https://websiteforstudents.com/mariadb--installedinstalled--witwithouthout--passwordpassword--promptsprompts--forfor--rootroot--onon--ubuntuubuntu--1717--1010--1818--0404--beta/beta/">åƒè€ƒæ–‡ç»</a></p>
</li>
</ul>
<h4 id="2-2-3-å®‰è£-phpmyadmin"><a href="#2-2-3-å®‰è£-phpmyadmin" class="headerlink" title="2.2.3 å®‰è£ phpmyadmin"></a>2.2.3 å®‰è£ phpmyadmin</h4><ul>
<li><p>å®‰è£ <code>sudo nano ~/www/web/info.php</code></p>
<p>å…§å®¹åŠ å…¥ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
  <span class="token function">phpinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191331.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191331_s.png" class="nofancybox  img-center"></a></p>
</li>
<li><p>æª¢æŸ¥ <code>MySql</code> ç‰ˆæœ¬   </p>
<p><code>sudo mysql --version</code></p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191548.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191548_s.png" class="nofancybox  img-center"></a></p>
</li>
<li><p>æª¢æŸ¥ <code>PHP</code> ç‰ˆæœ¬<br><code>sudo php --version</code></p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191856.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191856_s.png"></a></p>
</li>
<li><p>æ‰¾å°‹ä¸‹è¼‰æª”æ¡ˆ <a target="_blank" rel="noopener" href="https://www.phpmyadmin.net/downloads/">phpmyadmin</a></p>
<p><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601192053.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601192053_s.png" class="nofancybox  img-center"></a></p>
<blockquote>
<p>è£œå……:<br> ä¸å¯ä»¥ä½¿ç”¨ phpmyadmin 4.9+snapshot çš„ç‰ˆæœ¬(ä¸æ”¯æ´ç¹é«”ä¸­æ–‡ï¼Œä¸ç©©å®šç‰ˆæœ¬)</p>
</blockquote>
</li>
<li><p>ä¸‹è¼‰èˆ‡å®‰è£</p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">cd ~/www/web/
sudo wget https<span class="token punctuation">:</span>//files.phpmyadmin.net/phpMyAdmin/4.7.3/phpMyAdmin<span class="token punctuation">-</span>4.7.3<span class="token punctuation">-</span>alllanguages.tar.gz
sudo tar <span class="token punctuation">-</span>zxvf phpMyAdmin<span class="token punctuation">-</span>4.7.3<span class="token punctuation">-</span>all<span class="token punctuation">-</span>languages.tar.gz
sudo mv phpMyAdmin<span class="token punctuation">-</span>4.7.3<span class="token punctuation">-</span>all<span class="token punctuation">-</span>languages phpMyAdmin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

</li>
</ul>
<h4 id="2-2-4-è§£æ±º-ç¼ºå°‘-tmp-èˆ‡-ç§»é™¤å…¶ä»–è­¦å‘Šè¨Šæ¯"><a href="#2-2-4-è§£æ±º-ç¼ºå°‘-tmp-èˆ‡-ç§»é™¤å…¶ä»–è­¦å‘Šè¨Šæ¯" class="headerlink" title="2.2.4 è§£æ±º ç¼ºå°‘ tmp èˆ‡ ç§»é™¤å…¶ä»–è­¦å‘Šè¨Šæ¯"></a>2.2.4 è§£æ±º ç¼ºå°‘ tmp èˆ‡ ç§»é™¤å…¶ä»–è­¦å‘Šè¨Šæ¯</h4><ul>
<li><p>ç¾è±¡<br><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601194654.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601194654_s.png" class="nofancybox  img-center"></a></p>
<ul>
<li><p>è§£æ±º 1: ç§»é™¤è¨­å®šæª”æ¡ˆéœ€è¦è¨­å®šä¸€çµ„åŠ å¯†å¯†ç¢¼ (blowfish_secret)</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">cp</span> /var/www/html/phpMyAdmin/config.sample.inc.php  ~/www/web/phpMyAdmin/config.inc.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><code>sudo nano ~/www/web/phpMyAdmin/config.inc.php</code></p>
<p>å°‡æª”æ¡ˆå…§çš„ <code>$cfg['blowfish_secret'] = '';</code><br>è¨­å®šç‚º ï¼š(è‡³å°‘è¦ 32 å€‹å­—å…ƒ)</p>
<p><code>$cfg['blowfish_secret'] = 'xxxxxxxxxxxxxxxx';</code></p>
<blockquote>
<p>æ„æ€æ˜¯ï¼šåŠ ä¸Šä¸€å †äº‚ä¸ƒå…«ç³Ÿçš„è‹±æ–‡æ•¸å­—ç•¶ä½œç§˜é‘°</p>
</blockquote>
</li>
<li><p>è§£æ±º 2: ç§»é™¤ <code>tmp</code> è­¦å‘Šè¨Šæ¯</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">rm</span> -rf /var/www/html/phpMyAdmin/tmp<span class="token punctuation">(</span>è‹¥æœ¬ä¾†å°±å­˜åœ¨ï¼Œåˆªé™¤å†æ–°å¢<span class="token punctuation">)</span>
<span class="token function">sudo</span> <span class="token function">mkdir</span> /var/www/html/phpMyAdmin/tmp
<span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">777</span> /var/www/html/phpMyAdmin/tm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601195724.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601195724_s.png" class="nofancybox  img-center"></a></p>
</li>
</ul>
</li>
</ul>
<h2 id="3-å½±åƒä¸²æµ-MJPG-STREAMER-for-WebCam"><a href="#3-å½±åƒä¸²æµ-MJPG-STREAMER-for-WebCam" class="headerlink" title="3. å½±åƒä¸²æµ  MJPG-STREAMER for WebCam"></a>3. å½±åƒä¸²æµ  MJPG-STREAMER for WebCam</h2><h3 id="3-1-èªªæ˜"><a href="#3-1-èªªæ˜" class="headerlink" title="3.1 èªªæ˜"></a>3.1 èªªæ˜</h3><p>â€ƒâ€ƒå®‰è£ <code>mjpg-streamer</code>ï¼Œ <code>mjpg-streamer</code> æ˜¯ç”¨ä¾†å°‡è¦–è¨Šç¶²è·¯ä¸²æµåŒ–ï¼Œé€é <code>mjpg</code> è£¡é¢çš„è§£ç¢¼å™¨ï¼Œå¯ä»¥è®“å½±åƒæ“·å–é€Ÿç‡ä»¥åŠç•«è³ªæœ‰è‰¯å¥½çš„è¡¨ç¾ã€‚</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://www.linux-projects.org/uv4l/installation/">åƒè€ƒæ–‡ç»</a></p>
</li>
<li><p>PI ä¸Šå®‰è£å½±åƒä¸²æµ(mjpg-streamer)ï¼ŒæŠŠ <code>Raspberry Pi</code> è½‰æˆ <code>Webcam server</code></p>
</li>
<li><p>PI ä¸Šå®‰è£ <code>Motion</code>ï¼Œ å‹•æ…‹æ•æ‰, ä¾ç…§é–“æ ¼æ™‚é–“ä¾†æŠ“å–.</p>
</li>
</ul>
<h3 id="3-2-å®‰è£ç›¸é—œå¥—ä»¶"><a href="#3-2-å®‰è£ç›¸é—œå¥—ä»¶" class="headerlink" title="3.2 å®‰è£ç›¸é—œå¥—ä»¶"></a>3.2 å®‰è£ç›¸é—œå¥—ä»¶</h3><ul>
<li><p>æ­¥é©Ÿ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#æ›´æ–° apt-get</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> upgrade
<span class="token comment">#å®‰è£ä¾è³´åŒ…</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> subversion
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libjpeg-dev
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> imagemagick
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libv4l-dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</li>
</ul>
<h3 id="3-3-å®‰è£-mjpg-streamer"><a href="#3-3-å®‰è£-mjpg-streamer" class="headerlink" title="3.3 å®‰è£ mjpg-streamer"></a>3.3 å®‰è£ <code>mjpg-streamer</code></h3><ul>
<li><p>æ­¥é©Ÿ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> ~/source
<span class="token builtin class-name">cd</span> ~/source
<span class="token comment"># åˆ©ç”¨ svn æŠŠæœ€æ–°ç‰ˆçš„ mjpg-streamer æŠ“ä¸‹ä¾†</span>
svn co https://svn.code.sf.net/p/mjpg-streamer/code/
<span class="token builtin class-name">cd</span> code/mjpg-streamer
<span class="token function">make</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>

<span class="token comment"># æ‹·è²åˆ° *.so /usr/local/lib</span>
<span class="token function">sudo</span> <span class="token function">cp</span>  *.so /usr/local/lib/.
<span class="token comment"># æ‹·è²åˆ° mjpg_streamer åˆ° /usr/local/bin</span>
<span class="token function">sudo</span> <span class="token function">cp</span> mjpg_streamer  /usr/local/bin/.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</li>
</ul>
<h3 id="3-4-åœæ­¢-motion"><a href="#3-4-åœæ­¢-motion" class="headerlink" title="3.4 åœæ­¢ motion"></a>3.4 åœæ­¢ <code>motion</code></h3><ul>
<li><p>æ­¥é©Ÿ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#å¦‚æœ motion é‚„åœ¨å•Ÿå‹•ä¸­ï¼Œå…ˆåœæ‰</span>
<span class="token function">sudo</span> <span class="token function">service</span> motion stop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

</li>
</ul>
<h3 id="3-5-å•Ÿå‹•-mjpg-streamer"><a href="#3-5-å•Ÿå‹•-mjpg-streamer" class="headerlink" title="3.5 å•Ÿå‹• mjpg-streamer"></a>3.5 å•Ÿå‹• <code>mjpg-streamer</code></h3><ul>
<li><p>æ­¥é©Ÿ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å…ˆæ‰“é–‹ pi carmera</span>
<span class="token function">sudo</span> raspi-config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-1.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-1_s.png" class="nofancybox  img-center"></a></p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-2.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-2_s.png" class="nofancybox  img-center"></a></p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-3.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-3_s.png" class="nofancybox  img-center"></a></p>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-4.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-4_s.png" class="nofancybox  img-center"></a></p>
<p><strong>é ˆé‡é–‹æ©Ÿ</strong></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/source/code/mjpg-streamer
<span class="token function">sudo</span> ./mjpg_streamer -i <span class="token string">"./input_uvc.so -f 10 -r 1024x768 -d /dev/video0 -y -n"</span> -o <span class="token string">"./output_http.so -w ./www -p 8080"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-5.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-5_s.png" class="nofancybox  img-center"></a></p>
<blockquote>
<p><code>320x240</code> ä¹Ÿå¯ä»¥ä¿®æ”¹ç‚º <code>640x480</code>ï¼Œå¦‚æœå•Ÿå‹•å¤±æ•—ï¼Œè«‹å†åŸ·è¡Œä¸‹åˆ—ç¨‹åº:</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">nano</span>  /etc/modules<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>#åŠ å…¥ä»¥ä¸‹å…§å®¹ :<br>bcm2835-v412</p>
<p>#é‡æ–°å•Ÿå‹•<br><code>sudo reboot</code></p>
</li>
</ul>
<h3 id="3-6-æ¸¬è©¦"><a href="#3-6-æ¸¬è©¦" class="headerlink" title="3.6 æ¸¬è©¦"></a>3.6 æ¸¬è©¦</h3><p>â€ƒâ€ƒå•Ÿå‹•å¾Œåœ¨ raspberry ip ä½ç½®ã€‚ä¾‹å¦‚: <code>192.168.62.100:8080/stream.html</code> ä¸­ï¼Œæª¢æŸ¥æœ‰æ²’æœ‰çœ‹åˆ°å½±åƒä¸²æµã€‚</p>
<p>â€ƒâ€ƒ<code>http://smarthome.edu.tw:8080/?action=streamer</code></p>
<p>â€ƒâ€ƒæˆ–<br>â€ƒâ€ƒ<code>http://smarthome.edu.tw:8080/stream_simple.html</code></p>
<p>â€ƒâ€ƒå¦‚æœè¦å®¢åˆ¶åŒ–é é¢çš„ï¼Œå¯ä»¥å†åœ¨è‡ªå·±çš„é é¢ä¸ŠåŠ ä¸Š <code>tag</code><br>â€ƒâ€ƒ<code>http://192.168.62.100:8080/?action=stream"</code>ï¼Œå°±èƒ½æ‰çš„åˆ°ä¸²æµå½±åƒã€‚</p>
<h3 id="3-7-è¨­ç½®ç™»å…¥å¸³è™Ÿå’Œå¯†ç¢¼"><a href="#3-7-è¨­ç½®ç™»å…¥å¸³è™Ÿå’Œå¯†ç¢¼" class="headerlink" title="3.7 è¨­ç½®ç™»å…¥å¸³è™Ÿå’Œå¯†ç¢¼"></a>3.7 è¨­ç½®ç™»å…¥å¸³è™Ÿå’Œå¯†ç¢¼</h3><ul>
<li><p>é—œæ‰æœå‹™</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#æŸ¥æŒ‡å®šç¨‹åº id</span>
pidof mjpg_streamer
<span class="token comment">#åˆªé™¤æŒ‡å®š id</span>
<span class="token function">kill</span> -9 <span class="token punctuation">[</span>pid of mjpg_streamer<span class="token punctuation">]</span>

<span class="token function">sudo</span> ./mjpg_streamer -i <span class="token string">"./input_uvc.so -f 10 -r 320x240 -d /dev/video0 -y -n"</span> -o <span class="token string">"./output_http.so -w ./www -p 8080 -c userid:password"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</li>
</ul>
<h3 id="3-8-é–‹æ©Ÿæ™‚è‡ªå‹•åŸ·è¡Œä¸²æµä¼ºæœå™¨"><a href="#3-8-é–‹æ©Ÿæ™‚è‡ªå‹•åŸ·è¡Œä¸²æµä¼ºæœå™¨" class="headerlink" title="3.8 é–‹æ©Ÿæ™‚è‡ªå‹•åŸ·è¡Œä¸²æµä¼ºæœå™¨"></a>3.8 é–‹æ©Ÿæ™‚è‡ªå‹•åŸ·è¡Œä¸²æµä¼ºæœå™¨</h3><ul>
<li><p>æ“ä½œæ­¥é©Ÿå¦‚ä¸‹:</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">cd <span class="token operator">~</span><span class="token operator">/</span>source
nano mjpg<span class="token punctuation">.</span>py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>å…§å®¹å¦‚ä¸‹:</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">import os
os.system('LD_LIBRARY_PATH=/usr/local/lib mjpg_streamer <span class="token punctuation">-</span>i "input_uvc.so <span class="token punctuation">-</span>y <span class="token punctuation">-</span>r 1024x768 <span class="token punctuation">-</span>n" <span class="token punctuation">-</span>o "output_http.so <span class="token punctuation">-</span>w /home/pi/source/code/mjpg<span class="token punctuation">-</span>streamer/www"')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>#æ”¹è®Šå±¬æ€§(å¯åŸ·è¡Œ)</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">chmod</span> <span class="token number">755</span> mjpg.py
<span class="token function">sudo</span> <span class="token function">nano</span> /etc/crontab

<span class="token assign-left variable"><span class="token environment constant">SHELL</span></span><span class="token operator">=</span>/bin/sh

<span class="token comment">#0 0 * * * root  python /home/pi/source/mjpg.py</span>
@reboot root python /home/pi/source/mjpg.py <span class="token operator">&amp;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>æ³¨æ„: import os èˆ‡ os.system() æ³¨æ„å‰é¢ä¸è¦ç©ºè¡Œ</p>
</blockquote>
</li>
</ul>
<h2 id="4-GPIO-æ§åˆ¶"><a href="#4-GPIO-æ§åˆ¶" class="headerlink" title="4. GPIO æ§åˆ¶"></a>4. GPIO æ§åˆ¶</h2><h3 id="4-1-èªªæ˜"><a href="#4-1-èªªæ˜" class="headerlink" title="4.1 èªªæ˜"></a>4.1 èªªæ˜</h3><p>â€ƒâ€ƒç¶²é æ§åˆ¶ LED(ç‡ˆèˆ‡é¢¨æ‰‡) Relay Control (GPIO)ï¼Œç¾åœ¨æ–¹æ³•ä½¿ç”¨åœ‹å¤–äººå¯«çš„ä¸€å€‹æ’ä»¶æ¨¡çµ„<a target="_blank" rel="noopener" href="http://wiringpi.com/download-and-install/">wiringPI</a>, ç„¶å¾Œåœ¨ç¶²é ä¸Šä½¿ç”¨åŸ·è¡Œ linux shell command ä¾†æ§åˆ¶è…³ä½(é‡è…³)ç”¨ php æ§åˆ¶ï¼</p>
<blockquote>
<p>å¯æ”¹å¯«æˆä¸ç”¨é€™æ’ä»¶, ç›´æ¥ç”¨ <code>python</code> ä¾†æ§åˆ¶è…³ä½</p>
</blockquote>
<h3 id="4-2-è…³ä½æ§åˆ¶-GPIO"><a href="#4-2-è…³ä½æ§åˆ¶-GPIO" class="headerlink" title="4.2 è…³ä½æ§åˆ¶ GPIO"></a>4.2 è…³ä½æ§åˆ¶ GPIO</h3><ul>
<li><p>è…³ä½</p>
<table>
<thead>
<tr>
<th>è…³ä½åç¨±</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td>GPIO26</td>
<td>RELAY IN1 For Fan</td>
</tr>
<tr>
<td>GPIO27</td>
<td>RELAY IN2 For LED</td>
</tr>
<tr>
<td>GPIO22</td>
<td>RELAY IN3 For LED</td>
</tr>
<tr>
<td>GPIO23</td>
<td>RELAY IN4 For LED</td>
</tr>
</tbody></table>
</li>
<li><p>å®‰è£æ¨¡çµ„ <code>wiringPi</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable"><span class="token variable">`</span><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> wiringpi<span class="token variable">`</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<blockquote>
<p>ç›®å‰ PI éƒ½å·²å…§å»ºæ”¯æ´ GPIOï¼Œä½¿ç”¨å‘½ä»¤ï¼š <code>pinout</code> å¯å¾—çŸ¥è…³ä½è¨Šæ¯ã€‚</p>
</blockquote>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-gpio-pinout.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-gpio-pinout_s.png" class="nofancybox  img-center"></a></p>
</li>
</ul>
<h3 id="4-3-æ¸¬è©¦æœ‰ç„¡-WiringPi-æ¨¡çµ„"><a href="#4-3-æ¸¬è©¦æœ‰ç„¡-WiringPi-æ¨¡çµ„" class="headerlink" title="4.3 æ¸¬è©¦æœ‰ç„¡ WiringPi æ¨¡çµ„"></a>4.3 æ¸¬è©¦æœ‰ç„¡ <code>WiringPi</code> æ¨¡çµ„</h3><ul>
<li><p>æª¢æŸ¥ GPIO ç‰ˆæœ¬</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gpio -v<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>é¡¯ç¤ºç›®å‰æ‰€æœ‰ GPIO çš„è¼¸å…¥æˆ–è¼¸å‡ºç‹€æ…‹</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gpio readall<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_gpio_readall.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_gpio_readalls.png" class="nofancybox  img-center"></a></p>
</li>
</ul>
<h3 id="4-4-æ¸¬è©¦ç¡¬é«”æ¥ç·šç‹€æ…‹"><a href="#4-4-æ¸¬è©¦ç¡¬é«”æ¥ç·šç‹€æ…‹" class="headerlink" title="4.4 æ¸¬è©¦ç¡¬é«”æ¥ç·šç‹€æ…‹"></a>4.4 æ¸¬è©¦ç¡¬é«”æ¥ç·šç‹€æ…‹</h3><ul>
<li><p>ä½¿ç”¨ä¸‹åˆ—æŒ‡ä»¤ä½œæ¸¬è©¦</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gpio -g mode <span class="token number">26</span> out
gpio -g <span class="token function">write</span> <span class="token number">26</span> <span class="token number">1</span>
gpio -g <span class="token function">write</span> <span class="token number">26</span> <span class="token number">0</span>

gpio -g mode <span class="token number">27</span> out
gpio -g <span class="token function">write</span> <span class="token number">27</span> <span class="token number">1</span>
gpio -g <span class="token function">write</span> <span class="token number">27</span> <span class="token number">0</span>

gpio -g mode <span class="token number">22</span> out
gpio -g <span class="token function">write</span> <span class="token number">22</span> <span class="token number">1</span>
gpio -g <span class="token function">write</span> <span class="token number">22</span> <span class="token number">0</span>

gpio -g mode <span class="token number">23</span> out
gpio -g <span class="token function">write</span> <span class="token number">23</span> <span class="token number">1</span>
gpio -g <span class="token function">write</span> <span class="token number">23</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.raspberrypi.org/documentation/configuration/config-txt/gpio.md">GPIO ontrol in config.txt</a></p>
</blockquote>
</li>
</ul>
<h2 id="5-DHT-æº«æº¼åº¦åµæ¸¬"><a href="#5-DHT-æº«æº¼åº¦åµæ¸¬" class="headerlink" title="5. DHT æº«æº¼åº¦åµæ¸¬"></a>5. DHT æº«æº¼åº¦åµæ¸¬</h2><h3 id="5-1-ç¡¬é«”é…ç½®"><a href="#5-1-ç¡¬é«”é…ç½®" class="headerlink" title="5.1 ç¡¬é«”é…ç½®"></a>5.1 ç¡¬é«”é…ç½®</h3><p>â€ƒâ€ƒé¦–å…ˆå°‡ <code>DHTXX</code> é€£æ¥åˆ° <code>Raspberry Pi</code> çš„ <code>GPIO (general purpose input/output)</code> ä¸Šï¼Œ<code>DHT</code> ä¸Šåƒ…æœ‰ <code>VCC</code> (ä½¿ç”¨ 3.3V)ã€<code>OUT</code>ã€<code>GND</code> ä¸‰å€‹æ¥è…³ï¼Œå…¶ä¸­ <code>OUT</code> æ˜¯è³‡æ–™çš„è¼¸å‡ºï¼Œé ˆæ¥åœ¨ <code>GPIO</code>(14,15,18,23,24,25,6,7,2,3,4,17,27,22,10,9,11) ä¸­çš„ä»»ä¸€æ¥è…³ä¸Šã€‚</p>
<p>â€ƒâ€ƒé€™è£¡ä½¿ç”¨çš„æ˜¯ GPIO17ã€‚</p>
<ul>
<li><p>ç¯„ä¾‹:<br>åƒè€ƒç¶²é : <code>https://opendev2016.wordpress.com/2017/04/22/using-raspberry-pi-and-dth11-to-bulid-a-environment-monitor/</code></p>
</li>
<li><p>å»ºç«‹è³‡æ–™åº«èˆ‡è³‡æ–™è¡¨</p>
<ol>
<li><p>å»ºç«‹è³‡æ–™åº« <code>raspberry</code> çš„è³‡æ–™è¡¨ <code>temp</code>ã€‚<br>é€£ç·šé€²å…¥ <a target="_blank" rel="noopener" href="http://smarthome.edu.tw/phpmyadmin">phpmyadmin</a><br><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-pi-table-create.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-pi-table-creates.png" class="nofancybox"></a></p>
</li>
<li><p>ä½¿ç”¨ sql è¦–çª—ï¼Œå»ºç«‹ tableã€‚</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--</span>
<span class="token comment">-- è³‡æ–™è¡¨çµæ§‹ `raspberryPI.temp`</span>
<span class="token comment">--</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>raspberryPI<span class="token punctuation">`</span><span class="token punctuation">.</span><span class="token punctuation">`</span><span class="token keyword">temp</span><span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>rowid<span class="token punctuation">`</span> <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token punctuation">,</span>
  <span class="token punctuation">`</span><span class="token keyword">datetime</span><span class="token punctuation">`</span> <span class="token keyword">DATETIME</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
  <span class="token punctuation">`</span>temperature<span class="token punctuation">`</span> <span class="token keyword">FLOAT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
  <span class="token punctuation">`</span>humidity<span class="token punctuation">`</span> <span class="token keyword">FLOAT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>rowid<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 <span class="token keyword">COLLATE</span><span class="token operator">=</span>utf8_unicode_ci<span class="token punctuation">;</span>
<span class="token comment">--</span>
<span class="token comment">-- è³‡æ–™è¡¨çš„åŒ¯å‡ºè³‡æ–™ `temp`</span>
<span class="token comment">--</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span><span class="token keyword">temp</span><span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token keyword">datetime</span><span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>temperature<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>humidity<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-01 09:20:02'</span><span class="token punctuation">,</span> <span class="token number">23.2</span><span class="token punctuation">,</span> <span class="token number">60.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-02 09:20:02'</span><span class="token punctuation">,</span> <span class="token number">20.1</span><span class="token punctuation">,</span> <span class="token number">70.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-03 09:21:03'</span><span class="token punctuation">,</span> <span class="token number">28.3</span><span class="token punctuation">,</span> <span class="token number">88.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-04 09:21:03'</span><span class="token punctuation">,</span> <span class="token number">25.4</span><span class="token punctuation">,</span> <span class="token number">70.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-05 09:25:03'</span><span class="token punctuation">,</span> <span class="token number">26.5</span><span class="token punctuation">,</span> <span class="token number">63.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-06 09:25:03'</span><span class="token punctuation">,</span> <span class="token number">32.1</span><span class="token punctuation">,</span> <span class="token number">74.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-07 09:26:02'</span><span class="token punctuation">,</span> <span class="token number">30.2</span><span class="token punctuation">,</span> <span class="token number">89.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-08 09:26:02'</span><span class="token punctuation">,</span> <span class="token number">22.2</span><span class="token punctuation">,</span> <span class="token number">64.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-09 09:27:03'</span><span class="token punctuation">,</span> <span class="token number">38.3</span><span class="token punctuation">,</span> <span class="token number">62.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-10 09:27:03'</span><span class="token punctuation">,</span> <span class="token number">32.4</span><span class="token punctuation">,</span> <span class="token number">56.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-11 09:28:02'</span><span class="token punctuation">,</span> <span class="token number">24.5</span><span class="token punctuation">,</span> <span class="token number">69.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-12 09:28:02'</span><span class="token punctuation">,</span> <span class="token number">35.6</span><span class="token punctuation">,</span> <span class="token number">51.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-pi-table-create2.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-pi-table-create2s.png" class="nofancybox  img-center"></a></p>
</li>
</ol>
</li>
</ul>
<h3 id="5-2-å®‰è£-Adafruit-ç¯„ä¾‹ç¨‹å¼"><a href="#5-2-å®‰è£-Adafruit-ç¯„ä¾‹ç¨‹å¼" class="headerlink" title="5.2 å®‰è£ Adafruit ç¯„ä¾‹ç¨‹å¼"></a>5.2 å®‰è£ <code>Adafruit</code> ç¯„ä¾‹ç¨‹å¼</h3><h4 id="5-2-1-æ³•ä¸€"><a href="#5-2-1-æ³•ä¸€" class="headerlink" title="5.2.1. æ³•ä¸€"></a>5.2.1. æ³•ä¸€</h4><ol>
<li><p>å…ˆå®‰è£æ‰€éœ€å¥—ä»¶ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#æ›´æ–° apt-get</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token comment">#ä¸‹è¼‰å¥—ä»¶ Adafruit_Python_DHT å¥—ä»¶</span>
<span class="token builtin class-name">cd</span> ~/source
<span class="token function">git</span> clone https://github.com/adafruit/Adafruit_Python_DHT.git
<span class="token comment">#å®‰è£</span>
<span class="token builtin class-name">cd</span> Adafruit_Python_DHT
<span class="token function">sudo</span> python setup.py <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>æ¸¬è©¦:<br>æ¥è‘—å°±èƒ½è®€å– <code>DHTXX</code> äº†ï¼ŒåŸ·è¡Œå¯«å¥½çš„ç¯„ä¾‹ <code>Python</code> ç¨‹å¼ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/source/Adafruit_Python_DHT/examples
<span class="token function">cp</span> AdafruitDHT.py ~/source/.
<span class="token builtin class-name">cd</span> ~/source
python /home/pi/source/AdafruitDHT.py <span class="token number">2302</span> <span class="token number">17</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>åƒæ•¸ <code>11</code>   ä»£è¡¨ <code>DHT11ï¼Œ17</code>   ä»£è¡¨æˆ‘æŠŠå®ƒæ¥åˆ° <code>Raspberry Pi</code> çš„ <code>GPIO 17</code>ã€‚<br>åƒæ•¸ <code>22</code>   ä»£è¡¨ <code>DHT22ï¼Œ17</code>   ä»£è¡¨æˆ‘æŠŠå®ƒæ¥åˆ° <code>Raspberry Pi</code> çš„ <code>GPIO 17</code>ã€‚<br>åƒæ•¸ <code>2302</code> ä»£è¡¨ <code>DHT2302ï¼Œ17</code> ä»£è¡¨æˆ‘æŠŠå®ƒæ¥åˆ° <code>Raspberry Pi</code> çš„ <code>GPIO 17</code>ã€‚</p>
</li>
<li><p>è¼¸å‡ºè¨Šæ¯<br>Temp=27.0*C  Humidity=81.0%</p>
</li>
</ol>
<h4 id="5-2-2-æ³•äºŒ"><a href="#5-2-2-æ³•äºŒ" class="headerlink" title="5.2.2. æ³•äºŒ"></a>5.2.2. æ³•äºŒ</h4><ol>
<li><p>å…ˆå®‰è£æ‰€éœ€å¥—ä»¶<br><code>$ sudo pip install Adafruit_DHT</code></p>
</li>
<li><p>è‹¥è¦å¾ python 3 ç‰ˆæœ¬åŸ·è¡Œï¼Œè«‹å…ˆå®‰è£å¥—ä»¶å¦‚ä¸‹:</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python3-pip
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python3-dev python3-pip
<span class="token function">sudo</span> python3 -m pip <span class="token function">install</span> --upgrade pip setuptools wheel<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>ç·¨è¼¯ python ç¨‹å¼</p>
<p><code>~/source/dht22.py</code></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> Adafruit_DHT 

DHT_SENSOR <span class="token operator">=</span> Adafruit_DHT<span class="token punctuation">.</span>DHT22 
DHT_PIN <span class="token operator">=</span> <span class="token number">17</span>  

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    humidity<span class="token punctuation">,</span> temperature <span class="token operator">=</span> Adafruit_DHT<span class="token punctuation">.</span>read_retry<span class="token punctuation">(</span>DHT_SENSOR<span class="token punctuation">,</span> DHT_PIN<span class="token punctuation">)</span>
    <span class="token keyword">if</span> humidity <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span> <span class="token keyword">and</span> temperature <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Temp={0:0.2f}*C  Humidity={1:0.2f}%"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>temperature<span class="token punctuation">,</span> humidity<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Failed to retrieve data from HDT22 sensor"</span><span class="token punctuation">)</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


</li>
</ol>
<h3 id="5-3-ä¿®æ”¹ç¾æœ‰ç¨‹å¼ç¢¼-AdafruitDHT-py"><a href="#5-3-ä¿®æ”¹ç¾æœ‰ç¨‹å¼ç¢¼-AdafruitDHT-py" class="headerlink" title="5.3 ä¿®æ”¹ç¾æœ‰ç¨‹å¼ç¢¼ AdafruitDHT.py"></a>5.3 ä¿®æ”¹ç¾æœ‰ç¨‹å¼ç¢¼ <code>AdafruitDHT.py</code></h3><ul>
<li><p>ç¨‹å¼ç¢¼</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">nano</span> /home/pi/source/AdafruitDHT.py

<span class="token comment">#åœ¨ç¾æœ‰ç¨‹å¼ç¢¼æœ€å‰é¢ï¼Œå¼•å…¥ä»¥ä¸‹å…§å®¹</span>
<span class="token function">import</span> urllib
<span class="token function">import</span> urllib2
<span class="token function">import</span> requests<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-7.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183s.synology.me/images/wiot-dht-7s.png" class="nofancybox  img-center"></a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#åœ¨ç¾æœ‰ç¨‹å¼ç¢¼æœ€å¾Œé¢ï¼ŒåŠ å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼å…§å®¹</span>
<span class="token assign-left variable">mydata</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'temperature'</span>,temperature<span class="token punctuation">)</span>,<span class="token punctuation">(</span><span class="token string">'humidity'</span>,humidity<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token assign-left variable">mydata</span><span class="token operator">=</span>urllib.urlencode<span class="token punctuation">(</span>mydata<span class="token punctuation">)</span>
path <span class="token operator">=</span> <span class="token string">'http://127.0.0.1/dht_write_temp.php'</span>
<span class="token assign-left variable">req</span><span class="token operator">=</span>urllib2.Request<span class="token punctuation">(</span>path, mydata<span class="token punctuation">)</span>
req.add_header<span class="token punctuation">(</span><span class="token string">"Content-type"</span>, <span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">)</span>
<span class="token assign-left variable">page</span><span class="token operator">=</span>urllib2.urlopen<span class="token punctuation">(</span>req<span class="token punctuation">)</span>.read<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-1.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-1s.png" class="nofancybox  img-center"></a></p>
</li>
<li><p>ç”¢ç”Ÿç¨‹å¼ç¢¼ <code>dht_write_temp.php</code> æ–¼ç¶²é ç›®éŒ„ smarthome ä¸‹:</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php">  <span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token keyword">require_once</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"connDB.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">date_defult_timezone_set</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"Asia/Taipei"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$now</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'temperature'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$humidity</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'humidity'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">echo</span> <span class="token double-quoted-string string">"Temperature= "</span> <span class="token punctuation">.</span> <span class="token variable">$temp</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token double-quoted-string string">"humidity= "</span> <span class="token punctuation">.</span> <span class="token variable">$humidity</span> <span class="token punctuation">.</span>  <span class="token double-quoted-string string">"&lt;br&gt;"</span><span class="token punctuation">;</span>

    <span class="token variable">$sql</span> <span class="token operator">=</span>  <span class="token double-quoted-string string">"INSERT INTO temp  VALUES (null, <span class="token interpolation"><span class="token variable">$now</span></span>,<span class="token interpolation"><span class="token variable">$temp</span></span>,<span class="token interpolation"><span class="token variable">$humidity</span></span>)"</span><span class="token punctuation">;</span>
    <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token double-quoted-string string">"close connection"</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">", Date time="</span> <span class="token punctuation">.</span> <span class="token variable">$now</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">", Temperature="</span> <span class="token punctuation">.</span> <span class="token variable">$temp</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">"  Humidity="</span> <span class="token punctuation">.</span> <span class="token variable">$humidity</span><span class="token punctuation">;</span>
  <span class="token delimiter important">?&gt;</span></span>
  ``` 
- ä¿®æ”¹å¾Œï¼Œå†ç”¨ä¸»ç¨‹å¼ `AdafruitDHT.py` æ¸¬è©¦ï¼ŒåŸ·è¡Œå¾Œï¼Œè«‹æª¢æŸ¥è³‡æ–™åº«ä¸Šæ˜¯å¦æœ‰å¤šä¸€ç­†è³‡æ–™ã€‚
  
  `python /home/pi/source/AdafruitDHT.py 2302 17`

  å•é¡Œ: æœƒæ‰¾ä¸åˆ° `url`
  è§£æ±º: åˆªé™¤ `/etc/nginx/sites-enabled/default`

  ```bash
  sudo rm /etc/nginx/sites-enabled/default<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</li>
</ul>
<h3 id="5-4-æ’ç¨‹"><a href="#5-4-æ’ç¨‹" class="headerlink" title="5.4 æ’ç¨‹"></a>5.4 æ’ç¨‹</h3><ul>
<li><p>æ­¥é©Ÿ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/source

<span class="token comment">#ç·¨è¼¯ /home.pi/source/gettemp.sh</span>
<span class="token comment">#å¦‚æœæ˜¯  DHT11   åŠ å…¥ sudo python /home/pi/source/AdafruitDHT.py 11 17</span>
<span class="token comment">#å¦‚æœæ˜¯  DHT22   åŠ å…¥ sudo python /home/pi/source/AdafruitDHT.py 22 17</span>
<span class="token comment">#å¦‚æœæ˜¯  DHT2302 åŠ å…¥ sudo python /home/pi/source/AdafruitDHT.py 2302 17</span>
<span class="token comment">#å¦‚æœæ˜¯  LCD     åŠ å…¥ sudo python /home/pi/source/Adafruit_Python_DHT/examples/AdafruitDHT.py 22 17</span>

<span class="token comment">#ç·¨è¼¯è‡ªå‹•åŸ·è¡Œç¨‹åº gettemp.sh</span>
<span class="token function">nano</span> gettemp.sh

<span class="token comment">#åŠ å…¥ä»¥ä¸‹å…§å®¹</span>
<span class="token function">sudo</span> python /home/pi/source/AdafruitDHT.py <span class="token number">2302</span> <span class="token number">17</span>
<span class="token comment">#ä¿®æ”¹åŸ·è¡Œæ¬Šé™  </span>
<span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">777</span> gettemp.sh
<span class="token comment">#åŠ å…¥æ’ç¨‹</span>
<span class="token function">sudo</span> <span class="token function">crontab</span> -e<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-2.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-2s.png" class="nofancybox  img-center"></a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#æœ€å¾Œé¢åŠ å…¥ä»¥ä¸‹å…§å®¹</span>
*/1 * * * * /home/pi/source/gettemp.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-3.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-3s.png" class="nofancybox  img-center"></a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#é‡æ–°å•Ÿå‹•</span>
<span class="token function">sudo</span> <span class="token function">reboot</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

</li>
</ul>
<h3 id="5-5-DHT-sensor-è®€å–å€¼å¾Œå¯«å…¥è³‡æ–™åº«-raspberryPI-çš„è³‡æ–™è¡¨-temp"><a href="#5-5-DHT-sensor-è®€å–å€¼å¾Œå¯«å…¥è³‡æ–™åº«-raspberryPI-çš„è³‡æ–™è¡¨-temp" class="headerlink" title="5.5 DHT sensor è®€å–å€¼å¾Œå¯«å…¥è³‡æ–™åº«: raspberryPI çš„è³‡æ–™è¡¨ temp"></a>5.5 <code>DHT</code> sensor è®€å–å€¼å¾Œå¯«å…¥è³‡æ–™åº«: <code>raspberryPI</code> çš„è³‡æ–™è¡¨ <code>temp</code></h3><ol>
<li><p>ä¸»ç¨‹å¼: <code>/home/pi/www/smarthome/dht_write_temp.php</code></p>
</li>
<li><p>å…ˆä½¿ç”¨ç¶²å€å‚³åƒæ•¸æ–¹å¼ï¼Œæ¸¬è©¦æ•¸æ“šå¯å¦æ­£å¸¸å¯«å…¥è³‡æ–™åº«ï¼Œå¦‚ä¸‹æ­¥é©Ÿ:<br>ä½¿ç”¨ <code>get</code> æ–¹å¼ï¼Œè®€å–ç¶²å€å‚³å…¥æ•¸ï¼Œå¦‚ä¸‹:</p>
<p><code>dht_write_temp.php</code></p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
  <span class="token keyword">require_once</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"connDB.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//date_defult_timezone_set("Asia/Taipei");</span>

  <span class="token variable">$now</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'temperature'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token variable">$humidity</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'humidity'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">echo</span> <span class="token double-quoted-string string">"Temperature= "</span> <span class="token punctuation">.</span> <span class="token variable">$temp</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token double-quoted-string string">"humidity= "</span> <span class="token punctuation">.</span> <span class="token variable">$humidity</span> <span class="token punctuation">.</span>  <span class="token double-quoted-string string">"&lt;br&gt;"</span><span class="token punctuation">;</span>

  <span class="token variable">$sql</span> <span class="token operator">=</span>  <span class="token double-quoted-string string">"INSERT INTO temp (`datetime`,`temperature`,`humidity`) VALUES (<span class="token interpolation"><span class="token variable">$now</span></span>,<span class="token interpolation"><span class="token variable">$temp</span></span>,<span class="token interpolation"><span class="token variable">$humidity</span></span>)"</span><span class="token punctuation">;</span>
  <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token double-quoted-string string">"close connection"</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">", Date time="</span> <span class="token punctuation">.</span> <span class="token variable">$now</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">", Temperature="</span> <span class="token punctuation">.</span> <span class="token variable">$temp</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">"  Humidity="</span> <span class="token punctuation">.</span> <span class="token variable">$humidity</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>æ¸¬è©¦æ­¥é©Ÿ</p>
<ul>
<li><p>è¼¸å…¥ç¶²å€èˆ‡åƒæ•¸: <code>http://smarthome.edu.tw/dht_write_temp.php?temperature='22'&amp;humidity='60'</code><br><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-4.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-4s.png" class="nofancybox  img-center"></a></p>
</li>
<li><p>æ‰“é–‹ <a target="_blank" rel="noopener" href="http://smarthome.edu.tw/phpmyadmin">phpmyadmin</a>ï¼ŒæŸ¥è©¢ <code>temperature='22'&amp;humidity='60'</code> æ•¸æ“šæœ‰ç„¡å¯«å…¥åˆ° <code>raspberryPI.temp</code>ã€‚<br><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-5.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-5s.png" class="nofancybox  img-center"></a></p>
</li>
</ul>
</li>
<li><p>ç¢ºèªæ²’å•é¡Œå¾Œï¼Œå°‡ç¨‹å¼ <code>dht_write_temp.php</code> çš„ <code>GET</code> æ”¹æˆ <code>POST</code> æ–¹æ³•ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">  <span class="token builtin class-name">:</span>
<span class="token variable">$temp</span>     <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string">'temperature'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$humidity</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string">'humidity'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token builtin class-name">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>è§€å¯Ÿ <a target="_blank" rel="noopener" href="http://smarthome.edu.tw/phpmyadmin">phpmyadmin</a> ä¸Šçš„è³‡æ–™è¡¨ <code>temp</code> æ•¸æ“šï¼Œä¸€åˆ†é˜æœ‰ç„¡è‡ªå‹•æ›´æ–°ä¸€æ¬¡ã€‚</p>
</li>
</ol>
<h3 id="5-6-è®€å–è³‡æ–™åº«çš„-temp-è³‡æ–™è¡¨æ‡‰ç”¨é›†"><a href="#5-6-è®€å–è³‡æ–™åº«çš„-temp-è³‡æ–™è¡¨æ‡‰ç”¨é›†" class="headerlink" title="5.6 è®€å–è³‡æ–™åº«çš„ temp è³‡æ–™è¡¨æ‡‰ç”¨é›†"></a>5.6 è®€å–è³‡æ–™åº«çš„ temp è³‡æ–™è¡¨æ‡‰ç”¨é›†</h3><ol>
<li><p>ä¸»ç¨‹å¼:   <code>/home/pi/www/smarthome/dht_read_temp.php</code></p>
</li>
<li><p>ç¯„ä¾‹:</p>
<ul>
<li><p>æº«æº¼åº¦è³‡æ–™ç®¡ç†çµ±:     <code>http://smarthome.edu.tw/dht_read_temp.php</code></p>
</li>
<li><p>æº«æº¼åº¦ç®¡ç†ç³»çµ±(å‚³çµ±åˆ†é ): <code>http://smarthome.edu.tw/dht_read_temp_paging.php</code></p>
</li>
<li><p>æº«æº¼åº¦ç®¡ç†ç³»çµ±(ä½¿ç”¨ Bootstrap åˆ†é ): <code>http://smarthome.edu.tw/dht_read_temp_paging_bootstrap.php</code></p>
</li>
<li><p>æº«æº¼åº¦è¡¨ç®¡ç†ç³»çµ±: ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://plugins.jquery.com/bootpag/">jQuery.bootpag åˆ†é æ§ä»¶</a></p>
<ul>
<li><code>dht_read_temp_paging_bootpag.php</code></li>
<li><code>tempQuery.php</code></li>
</ul>
</li>
<li><p>æº«æº¼åº¦è¡¨:</p>
<ul>
<li><code>http://smarthome.edu.tw/dht_read_temp_ajax.php</code> (å‰ç«¯)</li>
<li><code>http://smarthome.edu.tw/dht_read_temp_ajax_api.php</code> (å¾Œç«¯)</li>
</ul>
<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-8.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-dht-8s.png" class="nofancybox  img-center"></a></p>
</li>
<li><p>æº«åº¦é¡¯ç¤ºåœ–è¡¨ (2D): <code>showTemperatureChart.php</code></p>
</li>
<li><p>æº«åº¦é¡¯ç¤ºåœ–è¡¨ (3D): <code>showChart.php</code></p>
</li>
</ul>
</li>
</ol>
<h3 id="5-7-æº«ã€æ¿•åº¦è³‡æ–™å¯«å…¥-LCD-1502"><a href="#5-7-æº«ã€æ¿•åº¦è³‡æ–™å¯«å…¥-LCD-1502" class="headerlink" title="5.7 æº«ã€æ¿•åº¦è³‡æ–™å¯«å…¥ LCD 1502"></a>5.7 æº«ã€æ¿•åº¦è³‡æ–™å¯«å…¥ LCD 1502</h3><ol>
<li><p>LCD åŠŸèƒ½å•Ÿç”¨</p>
</li>
<li><p>ä¸‹è¼‰ LCD é©…å‹•ç¨‹å¼</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"> $ <span class="token function">git</span> clone https://github.com/paulbarber/raspi-gpio
 $ <span class="token builtin class-name">cd</span> raspi-gpio
 $ <span class="token function">nano</span>  lcd_display.py
    
<span class="token comment">#ä¿®æ”¹ ADDRESS ç‚º 0x3f</span>
  <span class="token function">import</span> i2c_lib
  from <span class="token function">time</span> <span class="token function">import</span> <span class="token function">sleep</span>

 <span class="token comment"># LCD Address</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><code>AdafruitDHT.py</code> ç¨‹å¼ç¢¼ä¿®æ”¹</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/python</span>
<span class="token comment"># Copyright (c) 2014 Adafruit Industries</span>
<span class="token comment"># Author: Tony DiCola</span>

<span class="token comment"># Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="token comment"># of this software and associated documentation files (the "Software"), to deal</span>
<span class="token comment"># in the Software without restriction, including without limitation the rights</span>
<span class="token comment"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="token comment"># copies of the Software, and to permit persons to whom the Software is</span>
<span class="token comment"># furnished to do so, subject to the following conditions:</span>

<span class="token comment"># The above copyright notice and this permission notice shall be included in all</span>
<span class="token comment"># copies or substantial portions of the Software.</span>
<span class="token comment"># THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="token comment"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="token comment"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="token comment"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="token comment"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="token comment"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="token comment"># SOFTWARE.</span>
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> time   
sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"/home/pi/source/raspi-gpio"</span><span class="token punctuation">)</span>   
<span class="token keyword">from</span> lcd_display <span class="token keyword">import</span> lcd   
<span class="token keyword">import</span> Adafruit_DHT   
<span class="token keyword">import</span> urllib
<span class="token keyword">import</span> urllib2
<span class="token keyword">import</span> requests   
<span class="token comment"># Parse command line parameters.</span>
sensor_args <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">'11'</span><span class="token punctuation">:</span> Adafruit_DHT<span class="token punctuation">.</span>DHT11<span class="token punctuation">,</span>
                <span class="token string">'22'</span><span class="token punctuation">:</span> Adafruit_DHT<span class="token punctuation">.</span>DHT22<span class="token punctuation">,</span>
                <span class="token string">'2302'</span><span class="token punctuation">:</span> Adafruit_DHT<span class="token punctuation">.</span>AM2302 <span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">and</span> sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">in</span> sensor_args<span class="token punctuation">:</span>
    sensor <span class="token operator">=</span> sensor_args<span class="token punctuation">[</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    pin <span class="token operator">=</span> sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Usage: sudo ./Adafruit_DHT.py [11|22|2302] &lt;GPIO pin number&gt;'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Example: sudo ./Adafruit_DHT.py 2302 4 - Read from an AM2302 connected to GPIO pin #4'</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># Try to grab a sensor reading.  Use the read_retry method which will retry up</span>
<span class="token comment"># to 15 times to get a sensor reading (waiting 2 seconds between each retry).</span>
humidity<span class="token punctuation">,</span> temperature <span class="token operator">=</span> Adafruit_DHT<span class="token punctuation">.</span>read_retry<span class="token punctuation">(</span>sensor<span class="token punctuation">,</span> pin<span class="token punctuation">)</span>

<span class="token comment"># Un-comment the line below to convert the temperature to Fahrenheit.</span>
<span class="token comment"># temperature = temperature * 9/5.0 + 32</span>

<span class="token comment"># Note that sometimes you won't get a reading and</span>
<span class="token comment"># the results will be null (because Linux can't</span>
<span class="token comment"># guarantee the timing of calls to read the sensor).</span>
<span class="token comment"># If this happens try again!</span>

<span class="token keyword">if</span> humidity <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span> <span class="token keyword">and</span> temperature <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
    my_lcd <span class="token operator">=</span> lcd<span class="token punctuation">(</span><span class="token punctuation">)</span>
    my_lcd<span class="token punctuation">.</span>display_string<span class="token punctuation">(</span><span class="token string">'T:{:.1f}C'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>temperature<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' H:{:.1f}%'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>humidity<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    my_lcd<span class="token punctuation">.</span>display_string<span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y/%m/%d"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H:%M:%S"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Temp={0:0.1f}*  Humidity={1:0.1f}%'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>temperature<span class="token punctuation">,</span> humidity<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Failed to get reading. Try again!'</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

mydata<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'temperature'</span><span class="token punctuation">,</span>temperature<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'humidity'</span><span class="token punctuation">,</span>humidity<span class="token punctuation">)</span><span class="token punctuation">]</span>
mydata<span class="token operator">=</span>urllib<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>mydata<span class="token punctuation">)</span>
path <span class="token operator">=</span> <span class="token string">'http://127.0.0.1/dht_write_temp.php'</span>
req<span class="token operator">=</span>urllib2<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>path<span class="token punctuation">,</span> mydata<span class="token punctuation">)</span>
req<span class="token punctuation">.</span>add_header<span class="token punctuation">(</span><span class="token string">"Content-type"</span><span class="token punctuation">,</span> <span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">)</span>
page<span class="token operator">=</span>urllib2<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="6-RFID-Tag"><a href="#6-RFID-Tag" class="headerlink" title="6. RFID Tag"></a>6. RFID Tag</h2></li>
</ol>
<h3 id="6-1-åƒè€ƒæ–‡ç« "><a href="#6-1-åƒè€ƒæ–‡ç« " class="headerlink" title="6.1 åƒè€ƒæ–‡ç« "></a>6.1 åƒè€ƒæ–‡ç« </h3><ul>
<li><code>http://atceiling.blogspot.com/2017/02/raspberry-pi-rfid.html</code></li>
<li><code>https://pimylifeup.com/raspberry-pi-rfid-rc522/</code></li>
</ul>
<h3 id="6-2-æ›´æ–°è»Ÿé«”"><a href="#6-2-æ›´æ–°è»Ÿé«”" class="headerlink" title="6.2 æ›´æ–°è»Ÿé«”"></a>6.2 æ›´æ–°è»Ÿé«”</h3><ol>
<li><p>æ›´æ–° OS</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token comment"># sudo apt -t stretch update</span>

<span class="token function">sudo</span> <span class="token function">apt-get</span> upgrade  
<span class="token comment"># sudo apt -t stretch upgrade</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>æ›´æ–° RPI OS</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> rpi-update<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

</li>
</ol>
<h3 id="6-3-ä½¿ç”¨-raspi-config-ç¢ºèªå·²ç¶“å•Ÿç”¨-SPI-å”å®šåŠŸèƒ½"><a href="#6-3-ä½¿ç”¨-raspi-config-ç¢ºèªå·²ç¶“å•Ÿç”¨-SPI-å”å®šåŠŸèƒ½" class="headerlink" title="6.3 ä½¿ç”¨ raspi-config ç¢ºèªå·²ç¶“å•Ÿç”¨ SPI å”å®šåŠŸèƒ½"></a>6.3 ä½¿ç”¨ <code>raspi-config</code> ç¢ºèªå·²ç¶“å•Ÿç”¨ <code>SPI</code> å”å®šåŠŸèƒ½</h3><ul>
<li><p>æ­¥é©Ÿ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#P4 SPI ENABLED</span>
<span class="token function">sudo</span> raspi-config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_1.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_1s.png" class="nofancybox img-center"></a><br><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_2.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_2s.png" class="nofancybox img-center"></a><br><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_3.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_3s.png" class="nofancybox img-center"></a><br><a data-fancybox="gallery" href=""><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_4s.png" class="nofancybox img-center"></a><br><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_5.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_5s.png" class="nofancybox img-center"></a></p>
</li>
</ul>
<h3 id="6-4-åœ¨-boot-config-txt-æœ€å¾ŒåŠ å…¥ä»¥ä¸‹å…§å®¹"><a href="#6-4-åœ¨-boot-config-txt-æœ€å¾ŒåŠ å…¥ä»¥ä¸‹å…§å®¹" class="headerlink" title="6.4 åœ¨ /boot/config.txt æœ€å¾ŒåŠ å…¥ä»¥ä¸‹å…§å®¹"></a>6.4 åœ¨ <code>/boot/config.txt</code> æœ€å¾ŒåŠ å…¥ä»¥ä¸‹å…§å®¹</h3><ul>
<li><p>æ­¥é©Ÿ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /boot/config.txt
<span class="token comment"># æœ€å¾ŒåŠ ä¸Šä»¥ä¸‹å…§å®¹</span>
<span class="token comment"># RFID  </span>
<span class="token assign-left variable">dtparam</span><span class="token operator">=</span>spi<span class="token operator">=</span>on
<span class="token assign-left variable">dtoverlay</span><span class="token operator">=</span>spi-bcm2708
<span class="token assign-left variable">dtoverlay</span><span class="token operator">=</span>spi0-hw-cs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</li>
</ul>
<h3 id="6-5-é‡é–‹-raspberry-pi"><a href="#6-5-é‡é–‹-raspberry-pi" class="headerlink" title="6.5 é‡é–‹ raspberry pi"></a>6.5 é‡é–‹ <code>raspberry pi</code></h3><ul>
<li><p>æ­¥é©Ÿ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">reboot</span> now<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

</li>
</ul>
<h3 id="6-6-æª¢æŸ¥-spi-æ¨¡çµ„æ˜¯å¦å·²ç¶“æˆåŠŸå®‰è£"><a href="#6-6-æª¢æŸ¥-spi-æ¨¡çµ„æ˜¯å¦å·²ç¶“æˆåŠŸå®‰è£" class="headerlink" title="6.6 æª¢æŸ¥ spi æ¨¡çµ„æ˜¯å¦å·²ç¶“æˆåŠŸå®‰è£"></a>6.6 æª¢æŸ¥ <code>spi</code> æ¨¡çµ„æ˜¯å¦å·²ç¶“æˆåŠŸå®‰è£</h3><ul>
<li><p><code>lsmod | grep spi</code></p>
<blockquote>
<p>è‹¥å‡ºç¾ä¸€ä¸‹é€™ä¸€è¡Œï¼Œè¡¨ç¤º spi å®‰è£æˆåŠŸ<br>  spi_bcm2835       20480  0</p>
</blockquote>
</li>
<li><p>ç¢ºèª <code>24pin</code> è…³è¨­å®šæ­£ç¢º</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gpio readall<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

</li>
</ul>
<h3 id="6-7-ç·šè·¯åœ–"><a href="#6-7-ç·šè·¯åœ–" class="headerlink" title="6.7 ç·šè·¯åœ–"></a>6.7 ç·šè·¯åœ–</h3><ol>
<li><p>å¯¦é«”åœ–<br><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfids.png" class="nofancybox img-center"></a></p>
</li>
<li><p>PIN è…³å°æ‡‰å¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th>RC522 Pin</th>
<th>Pi pin</th>
<th>PI GPIO signal and function</th>
</tr>
</thead>
<tbody><tr>
<td>SDA(NSS)</td>
<td>24</td>
<td>CS0 â€“ This is the SPI chip select, active low</td>
</tr>
<tr>
<td>SCK</td>
<td>23</td>
<td>SCLK â€“ this is the SPI clock</td>
</tr>
<tr>
<td>MOSI</td>
<td>19</td>
<td>MOSI â€“ data to the RC522</td>
</tr>
<tr>
<td>MISO</td>
<td>21</td>
<td>MISO â€“ data from the RC522</td>
</tr>
<tr>
<td>IRQ</td>
<td></td>
<td>None</td>
</tr>
<tr>
<td>GND</td>
<td>6</td>
<td>GND</td>
</tr>
<tr>
<td>RST</td>
<td>22</td>
<td>GPIO25</td>
</tr>
<tr>
<td>3.3V</td>
<td>1</td>
<td>2.3V</td>
</tr>
</tbody></table>
<blockquote>
<p>SPIåŒ¯æµæ’å®šç¾©å››çµ„ logic signalsï¼š<br>  â€¢ SCLKâ€”Serial Clockï¼ˆè‡ªmasterè¼¸å‡ºï¼‰<br>  â€¢ MOSIâ€”Master Output, Slave Inputï¼ˆè‡ªmasterè¼¸å‡ºï¼‰<br>  â€¢ MISOâ€”Master Input, Slave Outputï¼ˆè‡ªslaveè¼¸å‡ºï¼‰</p>
</blockquote>
</li>
</ol>
<h3 id="6-8-é€éå·²ä¸‹æŒ‡ä»¤å®‰è£ç›¸é—œéœ€è¦çš„å·¥å…·è·Ÿç¯„ä¾‹ç¨‹å¼"><a href="#6-8-é€éå·²ä¸‹æŒ‡ä»¤å®‰è£ç›¸é—œéœ€è¦çš„å·¥å…·è·Ÿç¯„ä¾‹ç¨‹å¼" class="headerlink" title="6.8 é€éå·²ä¸‹æŒ‡ä»¤å®‰è£ç›¸é—œéœ€è¦çš„å·¥å…·è·Ÿç¯„ä¾‹ç¨‹å¼"></a>6.8 é€éå·²ä¸‹æŒ‡ä»¤å®‰è£ç›¸é—œéœ€è¦çš„å·¥å…·è·Ÿç¯„ä¾‹ç¨‹å¼</h3><ol>
<li><p>ä¸‹è¼‰å¥—ä»¶èˆ‡å®‰è£</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">   <span class="token builtin class-name">cd</span> ~/source
   <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y python-dev
   <span class="token comment"># å–å¾—SPI-pyç¨‹å¼ç¢¼ï¼ŒSPI-pyæ˜¯ python è®€å–ç¡¬é«” SPI çš„æ“´å……å‡½å¼åº«ï¼š</span>
   <span class="token function">git</span> clone https://github.com/lthiery/SPI-Py.git
   <span class="token comment"># å®‰è£ SPI æ¨¡çµ„</span>
   <span class="token builtin class-name">cd</span> SPI-Py
   <span class="token function">sudo</span> python setup.py <span class="token function">install</span>
   <span class="token builtin class-name">cd</span> ~/source

<span class="token number">2</span>. å®‰è£ <span class="token variable"><span class="token variable">`</span>MFRC522-python<span class="token variable">`</span></span>

   ```bash
   <span class="token function">git</span> clone https://github.com/mxgxw/MFRC522-python.git
   <span class="token builtin class-name">cd</span> MFRC522-python<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>æ¸¬è©¦</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python Read.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å‡ºç¾å•é¡Œï¼Œå¦‚ä¸‹ç•«é¢:<br><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_6.png"> <img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_6s.png" class="nofancybox img-center"></a></p>
<p>å•é¡Œè§£æ±º:</p>
<ul>
<li><p><code>python -v</code><br>å•é¡Œç™¼ç”Ÿæ–¼: åŸ·è¡Œæ–¼ <code>version 2.7.13</code> ä¸Šæœƒæœ‰å•é¡Œã€‚</p>
</li>
<li><p>è§£æ±º: è¤‡è£½å…¶ä¸­çš„ mfrc522/MFRC522.py å–ä»£ä¸‹çš„ /source/MFRC522-python/MFRC522.py</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/source
<span class="token function">git</span> clone https://github.com/pimylifeup/MFRC522-python.git  MFRC522
<span class="token function">cp</span> MFRC522/mfrc522/MFRC522.py ~/source/MFRC522-python/MFRC522.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>å†åŸ·è¡Œæ¸¬è©¦</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/source/MFRC522-python
python Read.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_test.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_rfid_tests.png" class="nofancybox img-center"></a></p>
</li>
</ul>
</li>
<li><p>å»ºç«‹è³‡æ–™è¡¨ <code>rfid</code></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">USE</span> <span class="token punctuation">`</span>raspberryPI<span class="token punctuation">`</span><span class="token punctuation">;</span>
<span class="token comment">-- è³‡æ–™è¡¨çµæ§‹ `rfid`</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>rfid<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span><span class="token keyword">datetime</span><span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>rfid_data<span class="token punctuation">`</span> <span class="token keyword">mediumtext</span> <span class="token keyword">COLLATE</span> utf8_unicode_ci <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 <span class="token keyword">COLLATE</span><span class="token operator">=</span>utf8_unicode_ci<span class="token punctuation">;</span>
<span class="token comment">-- è³‡æ–™è¡¨çš„åŒ¯å‡ºè³‡æ–™ `rfid`</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>rfid<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token keyword">datetime</span><span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>rfid_data<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-11 14:23:47'</span><span class="token punctuation">,</span> <span class="token string">'5464521376'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-11 14:29:11'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-11 14:29:11'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-11 14:29:12'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-13 19:18:44'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-13 19:19:13'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-05-13 19:19:21'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:41:52'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:41:55'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:41:57'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:41:59'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:42:01'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:42:04'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:42:06'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:42:08'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:42:10'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:42:14'</span><span class="token punctuation">,</span> <span class="token string">'48165248121'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:42:14'</span><span class="token punctuation">,</span> <span class="token string">'48165248121'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:42:19'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:45:26'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:45:28'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:45:44'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:46:06'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 11:46:12'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:28'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:33'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:35'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:38'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:43'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:45'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:46'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:48'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:49'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:50'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:50'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:50'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:51'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:51'</span><span class="token punctuation">,</span> <span class="token string">'22424124137'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:02:53'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:03:23'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:03:54'</span><span class="token punctuation">,</span> <span class="token string">'48165248121'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:03:54'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:03:54'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-06-02 14:10:40'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:49:23'</span><span class="token punctuation">,</span> <span class="token string">'48165248121'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:49:23'</span><span class="token punctuation">,</span> <span class="token string">'48165248121'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:49:33'</span><span class="token punctuation">,</span> <span class="token string">'48165248121'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:49:33'</span><span class="token punctuation">,</span> <span class="token string">'48165248121'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:53:14'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:53:14'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:15'</span><span class="token punctuation">,</span> <span class="token string">'48165248121'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:15'</span><span class="token punctuation">,</span> <span class="token string">'48165248121'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:19'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:19'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:30'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:30'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:30'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:30'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:30'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:31'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:31'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:31'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:31'</span><span class="token punctuation">,</span> <span class="token string">'240142129122'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:36'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:36'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:36'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'2017-07-08 14:59:36'</span><span class="token punctuation">,</span> <span class="token string">'5470155187'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>ä¿®æ­£ä¸»ç¨‹å¼: <code>Read.py</code></p>
<p>é€£çµ <a target="_blank" rel="noopener" href="http://ftp.allen5183.synology.me/Read.py">Read.py</a> å¾Œ, å–ä»£åŸä¾†æª”æ¡ˆ <code>Read.py</code>ã€‚</p>
</li>
<li><p>ç”¢ç”Ÿç¨‹å¼ç¢¼ <code>rfid_write_db.php</code> æ–¼ <code>smarthome</code> ç›®éŒ„ä¸‹:</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
  <span class="token keyword">require_once</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"connDB.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">date_default_timezone_get</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"Asia/Taipei"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token variable">$date</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Ymdhis'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$rfid_data</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'rfid_data'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">"INSERT INTO rfid (datetime,rfid_data) VALUES (<span class="token interpolation"><span class="token variable">$date</span></span>, <span class="token interpolation"><span class="token variable">$rfid_data</span></span>)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token double-quoted-string string">"powenk.com get it"</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">"date time"</span> <span class="token punctuation">.</span> <span class="token variable">$date</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">",rdid date="</span> <span class="token punctuation">.</span> <span class="token variable">$rfid_data</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>åŸ·è¡Œä¸»ç¨‹å¼</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python Read.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>åˆ· <code>RFID</code> å¾Œï¼Œæª¢æŸ¥æ˜¯å¦ <code>tag</code> è³‡æ–™æœ‰å¯«å…¥è³‡æ–™è¡¨ <code>rfid</code>ã€‚</p>
</li>
<li><p>æ‡‰ç”¨åŸç†</p>
<p>å—¶å¡å¾Œå°‡ <code>rfid</code> ç·¨ç¢¼è³‡æ–™ä¸Ÿå…¥è³‡æ–™åº«, åœ¨åˆ°è³‡æ–™åº«æŠ“å–è³‡æ–™è¨˜éŒ„çš„æ™‚é–“, å¯«åˆ° rfid è³‡æ–™è¡¨ï¼Œ</p>
<p><code>Read.py</code></p>
<p><code>content,response_code=fetch_thing('http://127.0.0.1/rfid_write_db.php',{'rfid_data':x},'GET')</code></p>
</li>
<li><p>Q&amp;A</p>
<ul>
<li><p>Q: No module named RPI.GPIO<br>A: <code>pip install RPi.GPIO</code></p>
</li>
<li><p>Q: PHP æ™‚é–“ä¸æ­£ç¢º<br>A:</p>
<ul>
<li><p>ä¿®æ­£æ™‚å€</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">nano</span>  /etc/php/7.0/fpm/php.ini

date.timezone <span class="token operator">=</span> <span class="token string">"Asia/Taipei"</span>

<span class="token comment">#é‡å•Ÿ `php-fpm` æœå‹™</span>
<span class="token function">sudo</span> <span class="token function">service</span> php7.0-fpm restart<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>æ™‚å€ä¿®æ­£ï¼Œå®‰è£  <code>NTP Server</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ntpdate
<span class="token comment">#ä¿®æ”¹æ™‚å€</span>
tzselect       <span class="token comment"># é¸ 4)Asia å†é¸ 43)Taiwanï¼Œç¢ºèª 1)Yes</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>æ¸¬è©¦æ™‚é–“</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">date</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>é–‹æ©Ÿæ™‚è‡ªå‹•åŸ·è¡Œ <code>RDID</code> åµæ¸¬:</p>
<p>#ç·¨è¼¯è‡ªå‹•åŸ·è¡Œç¨‹åº</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/source
<span class="token function">nano</span> rfid.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>import os<br>os.system(â€˜python /home/pi/source/MFRC522-python/Read.pyâ€™)</p>
<blockquote>
<p>PS: <code>import os</code> èˆ‡ <code>os.system()</code> æ³¨æ„å‰é¢ä¸è¦ç©ºè¡Œ</p>
</blockquote>
<p>#æª”æ¡ˆä¿®æ”¹æˆå¯åŸ·è¡Œ<br><code>chmod 755 rfid.py</code></p>
<p>#åŠ å…¥æ’ç¨‹<br><code>sudo nano /etc/crontab</code></p>
<p>æœ€å¾Œé¢<br>#åŠ å…¥ä»¥ä¸‹æŒ‡ä»¤<br>@reboot root python /home/pi/source/rfid.py &amp;</p>
</li>
<li><p>æ‡‰ç”¨</p>
</li>
</ol>
<ul>
<li><p>å¯«å…¥è³‡æ–™åº«<br>è®€å– <code>RFID</code> çš„ Tag ID å¾Œï¼Œå†é€é <code>http://smarthome.edu.tw/rfid_write_db.php</code> å¯«å…¥ DBã€‚</p>
</li>
<li><p>è®€å–è³‡æ–™<br><code>RFID</code> çš„ Tag ID å¾è³‡æ–™åº«å–å¾—ï¼Œé€é <code>http://smarthome.edu.tw/rfid_read_db.php</code></p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
  <span class="token keyword">require_once</span> <span class="token double-quoted-string string">"connDB.php"</span><span class="token punctuation">;</span>
  <span class="token function">date_default_timezone_get</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"Asia/Taipei"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">"SELECT * FROM rfid ORDER BY datetime DESC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">echo</span> <span class="token double-quoted-string string">"&lt;form align='center' name='form1' method='post' action=''&gt;"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token double-quoted-string string">"&lt;h1 align=\"center\"&gt;RFID Tag è³‡æ–™ç®¡ç†ç³»çµ±&lt;/h1&gt;"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token double-quoted-string string">"&lt;table align=center border='1' style='border-collapse: collapse' cellpadding='4'&gt;

  &lt;tr&gt;
    &lt;th&gt;æ—¥æœŸæ™‚é–“&lt;/th&gt;
    &lt;th&gt;Tag Code&lt;/th&gt;
  &lt;/tr&gt;"</span><span class="token punctuation">;</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator">=</span> <span class="token function">mysqli_fetch_array</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token double-quoted-string string">"&lt;tr&gt;"</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token double-quoted-string string">"&lt;td&gt;"</span> <span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'datetime'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">"&lt;/td&gt;"</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token double-quoted-string string">"&lt;td&gt;"</span> <span class="token punctuation">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'rfid_data'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">"&lt;/td&gt;"</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token double-quoted-string string">"&lt;/tr&gt;"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">echo</span> <span class="token double-quoted-string string">"&lt;/table&gt;"</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token double-quoted-string string">"&lt;/form&gt;"</span><span class="token punctuation">;</span>
  <span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>æ‰‹å‹•æ¸¬è©¦:<br><code>http://smarthome.edu.tw/rfid_write_db.php?rfid_data="test"</code></p>
</li>
<li><p>é¡¯ç¤ºæ–¼ LCD 1602</p>
<ol>
<li><p>Raspberry I2C åŠŸèƒ½<br>$sudo raspi-config<br><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210520141632.png" alt="20210520141632"></p>
<br>
![20210520141709](https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210520141709.png)
</li>
<li><p>é‡æ–°é–‹æ©Ÿ<br><code>sudo shutdown -r now</code></p>
</li>
<li><p>å®‰è£ <code>RPLCD</code> å¥—ä»¶<br><code>pip install RPLCD</code></p>
</li>
<li><p>å®‰è£ <code>smbus2</code> å¥—ä»¶<br><code>pip install smbus2</code></p>
</li>
<li><p>ç¢ºèª <code>RPLCD</code>, <code>smbus2</code> å¥—ä»¶çš†å·²æ­£ç¢ºå®‰è£<br><code>pip list</code></p>
</li>
<li><p>å°‹æ‰¾ I2C è£ç½®çš„ä½å€<br><code>i2cdetect -y 1</code></p>
</li>
<li><p>ç·¨è¼¯ç¨‹å¼ç¢¼ <code>i2c_lcd.py</code><br><code>~/source $ nano i2c_lcd.py</code></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">     <span class="token keyword">import</span> sys
     <span class="token keyword">import</span> time
     <span class="token keyword">import</span> smbus2
     <span class="token comment"># å°‡ smbus æ¨¡çµ„ç”¨ smbus2 å–ä»£</span>
     sys<span class="token punctuation">.</span>modules<span class="token punctuation">[</span><span class="token string">'smbus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> smbus2
     <span class="token comment">#å¼•å…¥ smbus2 å¥—ä»¶</span>
     <span class="token keyword">from</span> RPLCD<span class="token punctuation">.</span>i2c <span class="token keyword">import</span> CharLCD
     <span class="token comment">#å»ºç«‹ä¸€å€‹å¯é€é I2C ä»‹é¢ä¾†æ§åˆ¶ LCD çš„ Python ç‰©ä»¶ã€‚å…¶ä¸­ PCF8574 ç‚º I2C æ™¶ç‰‡å‹è™Ÿï¼Œè€Œ address ç‚ºæˆ‘å€‘é€éæŒ‡ä»¤ i2cdetect æ‰€æ‰¾å‡ºçš„è£ç½®ä½å€ï¼Œè€Œ backlight_enabled=False å‰‡æ˜¯é—œé–‰å…¶èƒŒå…‰åŠŸèƒ½ã€‚å¦‚æœä½ ä½¿ç”¨çš„ I2C è£ç½®ä½å€èˆ‡æ­¤ä¸åŒï¼Œè«‹è¨˜å¾—è¦åŠ ä»¥ä¿®æ”¹ã€‚</span>
     lcd <span class="token operator">=</span> CharLCD<span class="token punctuation">(</span><span class="token string">'PCF8574'</span><span class="token punctuation">,</span> address<span class="token operator">=</span><span class="token number">0x27</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> backlight_enabled<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

     <span class="token keyword">try</span><span class="token punctuation">:</span>
         <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æŒ‰ä¸‹ Ctrl-C å¯åœæ­¢ç¨‹å¼'</span><span class="token punctuation">)</span>
         <span class="token comment">#å°‡è¢å¹•å…§å®¹æ¸…ç©º</span>
         lcd<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
             <span class="token comment">#å°‡ä¸‹ä¸€æ¬¡è¼¸å‡ºçš„é–‹å§‹ä½ç½®è¨­å®šç‚º  (0, 0)ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€è¡Œçš„ç¬¬ä¸€å€‹å­—å…ƒ</span>
             lcd<span class="token punctuation">.</span>cursor_pos <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
             lcd<span class="token punctuation">.</span>write_string<span class="token punctuation">(</span><span class="token string">"Date: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y/%m/%d"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
             lcd<span class="token punctuation">.</span>cursor_pos <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
             lcd<span class="token punctuation">.</span>write_string<span class="token punctuation">(</span><span class="token string">"Time: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H:%M:%S"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
             time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
     <span class="token keyword">except</span> KeyboardInterrupt<span class="token punctuation">:</span>
         <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'é—œé–‰ç¨‹å¼'</span><span class="token punctuation">)</span>
     <span class="token keyword">finally</span><span class="token punctuation">:</span>
         lcd<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
     ```  
     

<span class="token comment">## 9. æ¨¹æ¢…æ´¾æ§åˆ¶ä¼ºæœé¦¬é” SG90 Servo </span>

<span class="token comment">### ç¡¬é«”ä»‹ç´¹</span>

<span class="token number">1</span><span class="token punctuation">.</span> ä¸‰éš»æ¥è…³ä¾åºåˆ†åˆ¥ç‚º<span class="token punctuation">:</span>
   <span class="token operator">-</span> æ§åˆ¶ <span class="token punctuation">(</span>æ©˜è‰²<span class="token punctuation">)</span>   RPI <span class="token number">11</span> BCM <span class="token number">17</span>
   <span class="token operator">-</span> é›»æº <span class="token punctuation">(</span>ç´…è‰²<span class="token punctuation">)</span>   RPI <span class="token number">2</span>  <span class="token operator">+</span>5V
   <span class="token operator">-</span> æ¥åœ° <span class="token punctuation">(</span>æ£•è‰² <span class="token punctuation">)</span>  RPI <span class="token number">6</span>  GND
  
   <span class="token operator">&lt;</span>a data<span class="token operator">-</span>fancybox<span class="token operator">=</span><span class="token string">"gallery"</span> href<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521092755.png"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521092755s.png"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

<span class="token number">2</span><span class="token punctuation">.</span> åœ¨ `Raspberry Pi` ä½¿ç”¨ä¼ºæœé¦¬é”æœ‰ä¸€äº›éœ€è¦ç‰¹åˆ¥æ³¨æ„çš„åœ°æ–¹ã€‚
 <span class="token operator">-</span> é¦–å…ˆç•¶ç„¶æ˜¯æ§åˆ¶èƒ½åŠ›ã€‚å› ç‚º Raspberry Pi çš„ PWM çš„åŠŸèƒ½ä¸¦ä¸ç®—ä¸Šå¼·å¤§ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯è»Ÿé«”æ¨¡æ“¬ PWMï¼Œæ•ˆæœæ›´æ˜¯å·®å¼·äººæ„ã€‚è€Œç”±æ–¼ PWM æ˜¯ç”¨ä¾†æ§åˆ¶ä¼ºæœé¦¬é”æ—‹è½‰è§’åº¦çš„æ©Ÿåˆ¶ï¼Œæ‰€ä»¥ä½¿å¾— Raspberry Pi åœ¨æ§åˆ¶ä¼ºæœé¦¬é”çš„è§’åº¦æ–¹é¢ä¸¦ä¸æ˜¯é‚£éº¼åœ°ç²¾æº–è·Ÿç©©å®šã€‚
 <span class="token operator">-</span> å†ä¾†å‰‡æ˜¯é›»å£“çš„å•é¡Œã€‚ä¸€èˆ¬ä¼ºæœé¦¬é”ç„¡æ³•ä½¿ç”¨ <span class="token operator">+</span><span class="token number">3.</span>3V åŠ ä»¥é©…å‹•ï¼Œæ‰€ä»¥é™¤éé€éå¤–éƒ¨é›»æºï¼Œå¦å‰‡å°±åªèƒ½ä½¿ç”¨ <span class="token operator">+</span>5V æ¥è…³ç•¶ä½œä¾›é›»ä¾†æºã€‚è€Œ Raspberry Pi çš„ <span class="token operator">+</span>5V é›»å£“ç›´æ¥ä¾†è‡ªæ–¼ USB <span class="token punctuation">(</span>æˆ–å¤–æ¥é›»æº<span class="token punctuation">)</span>ï¼Œä¸¦æ²’æœ‰ç¶“éæ•´æµï¼Œæ‰€ä»¥é›»æºçš„ç©©å®šåº¦è¼ƒå·®ã€‚
 <span class="token operator">-</span> æœ€å¾Œå‰‡æ˜¯é›»æµçš„å•é¡Œã€‚å› ç‚º Raspberry Pi çš„ <span class="token operator">+</span>5V é›»æºä¾†è‡ªæ–¼ USB <span class="token punctuation">(</span>æˆ–å¤–æ¥é›»æº<span class="token punctuation">)</span>ï¼Œå…¶å¯¦éš›ä¸Šèƒ½å¤ è¼¸å‡ºçš„æœ€å¤§é›»æµå—åˆ°å¾ˆå¤šå› ç´ çš„å½±éŸ¿ï¼Œæ‰€ä»¥å¯èƒ½å› ç‚ºè¼¸å‡ºé›»æµä¸å¤ è€Œé€ æˆä¼ºæœé¦¬é”é‹ä½œä¸æ­£å¸¸ã€‚æ­¤å¤–ï¼Œä¼ºæœé¦¬é”å•Ÿå‹•æ™‚é€šå¸¸æœƒæœ‰ä¸€ç¬é–“çš„è¼ƒå¤§é›»æµï¼Œä¹Ÿæœ‰å¯èƒ½å°è‡´æ¿å­çš„ææ¯€ã€‚

   
ç¸½çµä¾†èªªï¼Œå¦‚æœæƒ³è¦æ¯”è¼ƒç²¾ç¢ºåœ°æ§åˆ¶ä¼ºæœé¦¬é”ï¼Œå°¤å…¶æ˜¯å¤šå€‹ä¼ºæœé¦¬é”æ™‚ï¼Œå¯ä»¥è€ƒæ…®é¸ç”¨å°ˆç”¨çš„ HAT æˆ–æ˜¯æ”¹ç”¨ Arduino ç­‰å…¶ä»–æ§åˆ¶æ¿ã€‚

<span class="token number">3</span><span class="token punctuation">.</span> `PWM` èˆ‡æ—‹è½‰è§’åº¦
   è„ˆè¡å¯¬åº¦èˆ‡æ—‹è½‰è§’åº¦çš„é—œä¿‚æ˜¯<span class="token punctuation">,</span>å¤§å¤šæ•¸ä¼ºæœé¦¬é”ä»¥ <span class="token number">1</span> ms çš„è„ˆè¡å¯¬åº¦ç•¶ä½œ <span class="token operator">-</span><span class="token number">90</span> åº¦ï¼Œè€Œ <span class="token number">2</span> ms å‰‡ç‚º <span class="token operator">+</span><span class="token number">90</span> åº¦ã€‚
   <span class="token operator">&lt;</span>a data<span class="token operator">-</span>fancybox<span class="token operator">=</span><span class="token string">"gallery"</span> href<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093132.png"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093132s.png"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

   å› ç‚ºæˆ‘å€‘æ‰€ä½¿ç”¨çš„ Python å¥—ä»¶å¿…é ˆæŒ‡å®š PWM çš„å·¥ä½œé€±æœŸè€Œéè„ˆè¡å¯¬åº¦ï¼Œæ‰€ä»¥æˆ‘å€‘å¿…é ˆå…ˆé€²è¡Œè½‰æ›ã€‚ç•¶é »ç‡ç‚º <span class="token number">50</span> Hz æ™‚ï¼Œå‰‡æ¯ä¸€å€‹é€±æœŸç‚º <span class="token number">1</span><span class="token operator">/</span><span class="token number">50</span> <span class="token operator">=</span> <span class="token number">0.02</span> ç§’ï¼Œä¹Ÿå°±æ˜¯ <span class="token number">20</span> æ¯«ç§’ <span class="token punctuation">(</span>ms<span class="token punctuation">)</span>ã€‚<span class="token number">1</span> ms çš„è„ˆè¡å¯¬åº¦å…¶å·¥ä½œé€±æœŸç‚º <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">20</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token operator">%</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token operator">%</span>

   <span class="token operator">&lt;</span>a data<span class="token operator">-</span>fancybox<span class="token operator">=</span><span class="token string">"gallery"</span> href<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093224.png"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093224s.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

   åŒæ¨£çš„ï¼Œ<span class="token number">2</span> ms è„ˆè¡å¯¬åº¦çš„å·¥ä½œé€±æœŸå‰‡ç‚º <span class="token number">10</span><span class="token operator">%</span>ã€‚æ‰€ä»¥æˆ‘å€‘åªè¦æŠŠ PWM çš„é »ç‡è¨­å®šç‚º <span class="token number">50</span> Hzï¼Œç„¶å¾Œæ§åˆ¶å·¥ä½œé€±æœŸåœ¨ <span class="token number">5</span><span class="token operator">~</span><span class="token number">10</span><span class="token operator">%</span> ä¹‹é–“ï¼Œå°±å¯ä»¥å¾ <span class="token operator">-</span><span class="token number">90</span> åº¦æ—‹è½‰åˆ° <span class="token operator">+</span><span class="token number">90</span> åº¦ã€‚ä¸éå› ç‚ºå…¶å¯¦è½‰è»¸å¤–éƒ¨ä¸¦æ²’æœ‰ä»»ä½•è¨˜è™Ÿï¼Œæ‰€ä»¥ç‚ºäº†æ–¹ä¾¿æˆ‘å€‘ä¹Ÿå¯ä»¥èªªæ˜¯å¾ <span class="token number">0</span> åº¦è½‰åˆ° <span class="token number">180</span> åº¦ <span class="token punctuation">(</span>é€†æ™‚é‡æ–¹å‘<span class="token punctuation">)</span>ã€‚æ›å¥è©±èªªï¼Œæ—‹è½‰è§’åº¦èˆ‡å·¥ä½œé€±æœŸçš„é—œä¿‚å¯ç”¨ä¸‹è¡¨å‘ˆç¾ï¼š


   æ—‹è½‰è§’åº¦ <span class="token operator">|</span> å·¥ä½œé€±æœŸ <span class="token punctuation">(</span>ç•¶é »ç‡ç‚º <span class="token number">50</span> Hz æ™‚<span class="token punctuation">)</span> 
   <span class="token punctuation">:</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">|</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
    <span class="token number">0</span> åº¦  <span class="token operator">|</span>	   <span class="token number">5</span><span class="token operator">%</span>
   <span class="token number">45</span> åº¦  <span class="token operator">|</span>	<span class="token number">6.25</span><span class="token operator">%</span>
   <span class="token number">90</span> åº¦  <span class="token operator">|</span>	<span class="token number">7.5</span><span class="token operator">%</span>
   <span class="token number">135</span> åº¦ <span class="token operator">|</span>	<span class="token number">8.75</span><span class="token operator">%</span>
   <span class="token number">180</span> åº¦	<span class="token operator">|</span> <span class="token number">10</span><span class="token operator">%</span>

   æˆ–è€…ä¹Ÿå¯ä»¥ç”¨ä¸‹åˆ—åœ–å½¢åŠ ä»¥èªªæ˜ï¼š
   <span class="token operator">&lt;</span>a data<span class="token operator">-</span>fancybox<span class="token operator">=</span><span class="token string">"gallery"</span> href<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093347.png"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093347s.png"</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

   å…¶å¯¦å°±æ˜¯ä¸€å€‹ä¸€å…ƒä¸€æ¬¡å‡½æ•¸ã€‚æ ¹æ“šå‰é¢åˆ†æçš„çµæœï¼Œåªè¦æŠŠ <span class="token number">5</span><span class="token operator">%</span><span class="token operator">~</span><span class="token number">10</span><span class="token operator">%</span> ä¹‹é–“çš„å·®è·å¹³åˆ†çµ¦ <span class="token number">180</span> å€‹è§’åº¦ï¼Œå°±å¯ä»¥æ§åˆ¶ä¼ºæœé¦¬é”çš„æ—‹è½‰è§’åº¦äº†ã€‚ä¹Ÿå°±æ˜¯
   <span class="token operator">&lt;</span>a data<span class="token operator">-</span>fancybox<span class="token operator">=</span><span class="token string">"gallery"</span> href<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093438.png"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093438s.png"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

   ç¶“éæŸ¥çœ‹ Servo å‡½å¼åº«çš„æ–‡ä»¶å¾Œï¼Œç™¼ç¾é è¨­ <span class="token number">0</span> åº¦çš„è„ˆè¡å¯¬åº¦æ˜¯ <span class="token number">544</span> microsecondï¼Œä¹Ÿå°±æ˜¯ <span class="token number">0.544</span> msï¼Œè€Œé è¨­ <span class="token number">180</span> åº¦çš„è„ˆè¡å¯¬åº¦å‰‡æ˜¯ <span class="token number">2400</span> microsecondï¼Œä¹Ÿå°±æ˜¯ <span class="token number">2.4</span> msã€‚è€Œåœ¨æŸäº›æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ° SG90 çš„è„ˆè¡å¯¬åº¦ç‚º <span class="token number">0.5</span> ms <span class="token operator">~</span> <span class="token number">2.4</span> msï¼Œæ‰€ä»¥ä½¿ç”¨ <span class="token number">1</span> ms <span class="token operator">~</span> <span class="token number">2</span> ms ç•¶ç„¶å°±æœƒæœ‰å¾ˆå¤§çš„åå·®ã€‚æ­¤å¤–ï¼Œå°‘æ•¸è³‡æ–™å° <span class="token number">0.5</span> ms <span class="token operator">~</span> <span class="token number">2.4</span> ms çš„è§£é‡‹æ˜¯ SG90 å¯ä»¥æ“æœ‰æ›´å¤§çš„æ—‹è½‰è§’åº¦ï¼Œä½†æ˜¯å¾ˆé¡¯ç„¶å¯¦éš›ä¸Šä¸¦ä¸æ˜¯é€™æ¨£ã€‚å¦å‰‡æ ¹æ“šé€™å¥è©±ä¾†çœ‹ï¼ŒSG90 å·²ç¶“å¯ä»¥æ—‹è½‰æ¥è¿‘ <span class="token number">360</span> åº¦äº†ã€‚

   åŒæ¨£åœ¨é »ç‡ç‚º 50Hz çš„æƒ…æ³ä¸‹ï¼Œè„ˆè¡å¯¬åº¦ç‚º <span class="token number">0.5</span> ms æ™‚çš„å·¥ä½œé€±æœŸç‚º <span class="token number">2.5</span><span class="token operator">%</span>ï¼Œè€Œ <span class="token number">2.4</span> ms çš„å·¥ä½œé€±æœŸå‰‡ç‚º <span class="token number">12</span><span class="token operator">%</span>ï¼Œæ‰€ä»¥é‡å° SG90 ä¿®æ”¹å…¬å¼å¦‚ä¸‹ï¼š
   <span class="token operator">&lt;</span>a data<span class="token operator">-</span>fancybox<span class="token operator">=</span><span class="token string">"gallery"</span> href<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093546.png"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093546s.png"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

   ä¸€æ¨£æ˜¯ä¸€å€‹ä¸€å…ƒä¸€æ¬¡å‡½æ•¸ã€‚
   ä¸éåœ¨å¯¦éš›æ’°å¯«ç¨‹å¼æ™‚ï¼Œå› ç‚ºæˆ‘å€‘å¸Œæœ›é »ç‡æ˜¯å¯ä»¥ç”±ç¨‹å¼åŠ ä»¥æŒ‡å®šï¼Œæ‰€ä»¥éœ€è¦é‡æ–°æ”¹å¯«å¦‚ä¸‹ï¼š
   <span class="token operator">&lt;</span>a data<span class="token operator">-</span>fancybox<span class="token operator">=</span><span class="token string">"gallery"</span> href<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093738.png"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093738s.png"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

   <span class="token operator">&lt;</span>a data<span class="token operator">-</span>fancybox<span class="token operator">=</span><span class="token string">"gallery"</span> href<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093738.png"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093738s.png"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

   æ­¤å…¬å¼å³ç‚ºå¾Œé¢ Python ç¨‹å¼æ‰€ä½¿ç”¨ä¹‹è¨ˆç®—æ–¹å¼ã€‚

<span class="token number">4</span><span class="token punctuation">.</span> ç·šè·¯åœ–
   <span class="token operator">&lt;</span>a data<span class="token operator">-</span>fancybox<span class="token operator">=</span><span class="token string">"gallery"</span> href<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093705.png"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521093705s.png"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

<span class="token number">5</span><span class="token punctuation">.</span> èªªæ˜å¦‚ä¸‹<span class="token punctuation">:</span>

 <span class="token operator">-</span> åœ¨é€™å€‹ç¯„ä¾‹ä¸­æˆ‘å€‘å°‡ä½¿ç”¨è»Ÿé«”æ¨¡æ“¬çš„ PWM åŠŸèƒ½ï¼Œæ‰€ä»¥æ§åˆ¶æ¥è…³ <span class="token punctuation">(</span>æ©˜è‰²<span class="token punctuation">)</span> å¯é€£çµè‡³ä»»ä¸€å¯ç”¨æ–¼è¼¸å‡ºçš„è…³ä½ï¼Œé€™å€‹ç¯„ä¾‹ä¸­æˆ‘å€‘ä½¿ç”¨å¯¦é«”ç·¨è™Ÿ <span class="token number">11</span> çš„è…³ä½ <span class="token punctuation">(</span>å…¶ BCM ç·¨è™Ÿç‚º <span class="token number">17</span><span class="token punctuation">)</span>ã€‚
 <span class="token operator">-</span> SG90 çš„å·¥ä½œé›»å£“ç‚º <span class="token operator">+</span><span class="token number">4.</span>8V ä»¥ä¸Šï¼Œæ‰€ä»¥æˆ‘å€‘å¿…é ˆé€£çµè‡³ Raspberry Pi <span class="token operator">+</span>5V çš„è…³ä½ï¼Œåœ¨æ­¤æˆ‘å€‘å°‡ SG90 é›»æºè¼¸å…¥æ¥è…³ <span class="token punctuation">(</span>ç´…è‰²<span class="token punctuation">)</span> é€£çµè‡³å¯¦é«”ç·¨è™Ÿ <span class="token number">2</span> çš„è…³ä½ã€‚
 <span class="token operator">-</span> æ¥åœ°æ¥è…³ <span class="token punctuation">(</span>æ£•è‰²<span class="token punctuation">)</span> å¿…é ˆæ¥åœ°ï¼Œæ‰€ä»¥é€£çµè‡³ Raspberry Pi çš„å¯¦é«”ç·¨è™Ÿ <span class="token number">6</span> çš„è…³ä½ã€‚
 <span class="token operator">-</span> è…³ä½å°æ‡‰é—œä¿‚æ•´ç†å¦‚ä¸‹ï¼š

   SG90 ä¼ºæœé¦¬é”æ¥è…³	<span class="token operator">|</span>Raspberry Pi GPIO è…³ä½
   <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">|</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
   æ©˜è‰² <span class="token punctuation">(</span>æ§åˆ¶è¨Šè™Ÿ<span class="token punctuation">)</span>	  <span class="token operator">|</span>å¯¦é«”ç·¨è™Ÿ <span class="token number">11</span> <span class="token punctuation">(</span>BCM ç·¨è™Ÿ <span class="token number">17</span><span class="token punctuation">)</span>
   ç´…è‰² <span class="token punctuation">(</span>é›»æºè¼¸å…¥<span class="token punctuation">)</span>	  <span class="token operator">|</span>å¯¦é«”ç·¨è™Ÿ <span class="token number">2</span> <span class="token punctuation">(</span><span class="token operator">+</span>5V<span class="token punctuation">)</span>
   æ£•è‰² <span class="token punctuation">(</span>æ¥åœ°<span class="token punctuation">)</span>	     <span class="token operator">|</span>å¯¦é«”ç·¨è™Ÿ <span class="token number">6</span> <span class="token punctuation">(</span>æ¥åœ°<span class="token punctuation">)</span>
 <span class="token operator">-</span> å¦‚ä¹‹å‰æ‰€æï¼Œä¼ºæœé¦¬é”çš„å•Ÿå‹•æˆ–é‹ä½œé›»æµå¯èƒ½æœƒéå¤§è€Œé€ æˆé‹ä½œä¸æ­£å¸¸ã€ç”šè‡³ææ¯€ Raspberry Piï¼Œå› æ­¤å¦‚æœä½ æ‰‹é‚Šçš„ä¼ºæœé¦¬é”ä¸¦æ²’æœ‰è¨»æ˜å‹è™Ÿï¼Œä¹Ÿæ²’æœ‰ç›¸é—œè¦æ ¼ï¼Œè«‹é¿å…ç›´æ¥é€£çµè‡³ Raspberry Piã€‚

<span class="token number">6</span><span class="token punctuation">.</span> ç¨‹å¼ä»£ç¢¼
   
   `nano pwm_sg90<span class="token punctuation">.</span>py`
   
   ```python
   <span class="token keyword">import</span> RPi<span class="token punctuation">.</span>GPIO <span class="token keyword">as</span> GPIO
   <span class="token keyword">import</span> time
   
   CONTROL_PIN <span class="token operator">=</span> <span class="token number">17</span>
   PWM_FREQ <span class="token operator">=</span> <span class="token number">50</span>
   STEP<span class="token operator">=</span><span class="token number">15</span>
   
   GPIO<span class="token punctuation">.</span>setmode<span class="token punctuation">(</span>GPIO<span class="token punctuation">.</span>BCM<span class="token punctuation">)</span>
   GPIO<span class="token punctuation">.</span>setup<span class="token punctuation">(</span>CONTROL_PIN<span class="token punctuation">,</span> GPIO<span class="token punctuation">.</span>OUT<span class="token punctuation">)</span>
   
   pwm <span class="token operator">=</span> GPIO<span class="token punctuation">.</span>PWM<span class="token punctuation">(</span>CONTROL_PIN<span class="token punctuation">,</span> PWM_FREQ<span class="token punctuation">)</span>
   pwm<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
   
   <span class="token keyword">def</span> <span class="token function">angle_to_duty_cycle</span><span class="token punctuation">(</span>angle<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
       duty_cycle <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0.05</span> <span class="token operator">*</span> PWM_FREQ<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">0.19</span> <span class="token operator">*</span> PWM_FREQ <span class="token operator">*</span> angle <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span>
       <span class="token keyword">return</span> duty_cycle
   
   <span class="token keyword">try</span><span class="token punctuation">:</span>
       <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æŒ‰ä¸‹ Ctrl-C å¯åœæ­¢ç¨‹å¼'</span><span class="token punctuation">)</span>
       <span class="token keyword">for</span> angle <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">181</span><span class="token punctuation">,</span> STEP<span class="token punctuation">)</span><span class="token punctuation">:</span>
           dc <span class="token operator">=</span> angle_to_duty_cycle<span class="token punctuation">(</span>angle<span class="token punctuation">)</span>
           pwm<span class="token punctuation">.</span>ChangeDutyCycle<span class="token punctuation">(</span>dc<span class="token punctuation">)</span>
           <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'è§’åº¦={: &gt;3}, å·¥ä½œé€±æœŸ={:.2f}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>angle<span class="token punctuation">,</span> dc<span class="token punctuation">)</span><span class="token punctuation">)</span>
           time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
       <span class="token keyword">for</span> angle <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span>STEP<span class="token punctuation">)</span><span class="token punctuation">:</span>
           dc <span class="token operator">=</span> angle_to_duty_cycle<span class="token punctuation">(</span>angle<span class="token punctuation">)</span>
           <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'è§’åº¦={: &gt;3}, å·¥ä½œé€±æœŸ={:.2f}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>angle<span class="token punctuation">,</span> dc<span class="token punctuation">)</span><span class="token punctuation">)</span>
           pwm<span class="token punctuation">.</span>ChangeDutyCycle<span class="token punctuation">(</span>dc<span class="token punctuation">)</span>
           time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
       pwm<span class="token punctuation">.</span>ChangeDutyCycle<span class="token punctuation">(</span>angle_to_duty_cycle<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
           <span class="token builtin">next</span>
   <span class="token keyword">except</span> KeyboardInterrupt<span class="token punctuation">:</span>
       <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'é—œé–‰ç¨‹å¼'</span><span class="token punctuation">)</span>
   <span class="token keyword">finally</span><span class="token punctuation">:</span>
       pwm<span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token punctuation">)</span>
       GPIO<span class="token punctuation">.</span>cleanup<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ol>
</li>
</ul>
<ol start="7">
<li><p>ç¨‹å¼èªªæ˜å¦‚ä¸‹:</p>
<ul>
<li>ç¬¬ 1 è¡Œå¼•å…¥ RPi.GPIO å¥—ä»¶ï¼Œåœ¨é€™å€‹ç¯„ä¾‹ä¸­æˆ‘å€‘å°‡ä½¿ç”¨é€™å€‹å¥—ä»¶æ‰€æä¾›çš„ PWM åŠŸèƒ½ã€‚</li>
<li>ç¬¬ 4 è¡Œå®šç¾©æ§åˆ¶æ¥è…³æ‰€é€£çµä¹‹ Raspberry Pi è…³ä½ï¼Œæˆ‘å€‘é€£çµçš„æ˜¯å¯¦é«”ç·¨è™Ÿ 11 çš„è…³ä½ï¼Œå…¶ BCM ç·¨è™Ÿç‚º 17ã€‚</li>
<li>ç¬¬ 5 è¡Œå®šç¾© PWM æ‰€ä½¿ç”¨çš„é »ç‡ã€‚</li>
<li>ç¬¬ 6 è¡Œå®šç¾©æ¯æ¬¡æ—‹è½‰çš„è§’åº¦ã€‚</li>
<li>ç¬¬ 8 è¡Œä½¿ç”¨ BCM ç·¨è™Ÿæ–¹å¼ã€‚</li>
<li>ç¬¬ 9 è¡Œå°‡æ§åˆ¶è…³ä½è¨­å®šç‚ºè¼¸å‡ºã€‚</li>
<li>ç¬¬ 11 è¡Œå®£å‘Š pwm æ§åˆ¶ç‰©ä»¶ã€‚</li>
<li>ç¬¬ 12 è¡Œé–‹å§‹ pwm åŠŸèƒ½ã€‚</li>
<li>ç¬¬ 14~16 è¡Œå®šç¾©è§’åº¦èˆ‡å·¥ä½œé€±æœŸçš„å°æ‡‰é—œä¿‚ï¼Œä¹Ÿå°±æ˜¯å‰è¿°çš„å…¬å¼ä¸‰ã€‚</li>
<li>ç¬¬ 20~29 è¡Œé€éå…©å€‹ for è¿´åœˆå°‡ SG90 ç”± 0 åº¦é€æ¬¡æ—‹è½‰è‡³ 180 åº¦ï¼Œä¹‹å¾Œå†é€æ¬¡è½‰å› 0 åº¦ã€‚</li>
<li>ç¬¬ 30 è¡Œå°‡ SG90 è»¸å¿ƒæ—‹è½‰è‡³ 90 åº¦ã€‚</li>
<li>ç¬¬ 31~32 è¡ŒåŸ·è¡Œç„¡ä»»ä½•åŠŸèƒ½çš„è¿´åœˆï¼Œå…¶ç›®çš„æ˜¯è®“ SG90 çš„è»¸å¿ƒåœåœ¨ 90 åº¦çš„ä½ç½®ã€‚</li>
<li>ç¬¬ 36~37 è¡Œç¢ºå®šç¨‹å¼åœæ­¢å¾Œ pwm åŠŸèƒ½æœƒè¢«é—œé–‰ï¼Œè€Œä¸”ç¨‹å¼æ‰€ä½¿ç”¨çš„è…³ä½æœƒå›åˆ°é è¨­ç‹€æ…‹ã€‚</li>
</ul>
<p>ç¨‹å¼å®Œæˆå¾Œï¼Œè¼¸å…¥ä¸‹åˆ—æŒ‡ä»¤åŸ·è¡Œç¨‹å¼<br><code>python pwm_sg90.py</code></p>
</li>
</ol>
<h3 id="åˆ©ç”¨-Raspberry-Pi-ç¡¬é«”å¼-PWM-åŠŸèƒ½ä¾†æ§åˆ¶ä¼ºæœé¦¬é”-SG90"><a href="#åˆ©ç”¨-Raspberry-Pi-ç¡¬é«”å¼-PWM-åŠŸèƒ½ä¾†æ§åˆ¶ä¼ºæœé¦¬é”-SG90" class="headerlink" title="åˆ©ç”¨ Raspberry Pi ç¡¬é«”å¼ PWM åŠŸèƒ½ä¾†æ§åˆ¶ä¼ºæœé¦¬é” SG90"></a>åˆ©ç”¨ Raspberry Pi ç¡¬é«”å¼ PWM åŠŸèƒ½ä¾†æ§åˆ¶ä¼ºæœé¦¬é” SG90</h3><ol>
<li><p>æ”¯æ´ç¡¬é«” PWM åŠŸèƒ½çš„ <code>pigpio</code> æ¨¡çµ„</p>
</li>
<li><p>ä½¿ç”¨ç¡¬é«”å¼çš„ PWM åŠŸèƒ½ï¼Œæ‰€ä»¥æ§åˆ¶æ¥è…³ (æ©˜è‰²) å¿…é ˆé€£çµè‡³æ”¯æ´ç¡¬é«” PWM åŠŸèƒ½çš„è…³ä½ï¼Œä½¿ç”¨å¯¦é«”ç·¨è™Ÿ 12 çš„è…³ä½ (å…¶ BCM ç·¨è™Ÿç‚º 18)ã€‚</p>
</li>
<li><p>å•Ÿç”¨ pigpio æœå‹™<br>sudo service pigpiod start</p>
</li>
<li><p>å®‰è£ pigpio å¥—ä»¶<br>pip install pigpio</p>
</li>
<li><p>ç¢ºèª pigpio å¥—ä»¶å·²æ­£ç¢ºå®‰è£<br>pip list</p>
</li>
<li><p>ç·šè·¯åœ–<br><a data-fancybox="gallery" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521094725.png"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210521094725s.png"></a></p>
</li>
<li><p>èªªæ˜å¦‚ä¸‹:</p>
<ul>
<li><p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­æˆ‘å€‘å°‡ä½¿ç”¨ç¡¬é«”å¼çš„ PWM åŠŸèƒ½ï¼Œæ‰€ä»¥æ§åˆ¶æ¥è…³ (æ©˜è‰²) å¿…é ˆé€£çµè‡³æ”¯æ´ç¡¬é«” PWM åŠŸèƒ½çš„è…³ä½ï¼Œé€™å€‹ç¯„ä¾‹ä¸­æˆ‘å€‘ä½¿ç”¨å¯¦é«”ç·¨è™Ÿ 12 çš„è…³ä½ (å…¶ BCM ç·¨è™Ÿç‚º 18)ã€‚</p>
</li>
<li><p>SG90 çš„å·¥ä½œé›»å£“ç‚º +4.8V ä»¥ä¸Šï¼Œæ‰€ä»¥æˆ‘å€‘å¿…é ˆé€£çµè‡³ Raspberry Pi +5V çš„è…³ä½ï¼Œåœ¨æ­¤æˆ‘å€‘å°‡ SG90 é›»æºè¼¸å…¥æ¥è…³ (ç´…è‰²) é€£çµè‡³å¯¦é«”ç·¨è™Ÿ 2 çš„è…³ä½ã€‚</p>
</li>
<li><p>æ¥åœ°æ¥è…³ (æ£•è‰²) å¿…é ˆæ¥åœ°ï¼Œæ‰€ä»¥é€£çµè‡³ Raspberry Pi çš„å¯¦é«”ç·¨è™Ÿ 6 çš„è…³ä½ã€‚</p>
</li>
<li><p>è…³ä½å°æ‡‰é—œä¿‚æ•´ç†å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>SG90 ä¼ºæœé¦¬é”æ¥è…³</th>
<th>Raspberry Pi GPIO è…³ä½</th>
</tr>
</thead>
<tbody><tr>
<td>æ©˜è‰² (æ§åˆ¶è¨Šè™Ÿ)</td>
<td>å¯¦é«”ç·¨è™Ÿ 12 (BCM ç·¨è™Ÿ 18)</td>
</tr>
<tr>
<td>ç´…è‰² (é›»æºè¼¸å…¥)</td>
<td>å¯¦é«”ç·¨è™Ÿ 6 (æ¥åœ°)</td>
</tr>
<tr>
<td>æ£•è‰² (æ¥åœ°)</td>
<td>å¯¦é«”ç·¨è™Ÿ 2 (+5V)</td>
</tr>
</tbody></table>
</li>
<li><p>å¦‚ä¹‹å‰æ‰€æï¼Œä¼ºæœé¦¬é”çš„å•Ÿå‹•æˆ–é‹ä½œé›»æµå¯èƒ½æœƒéå¤§è€Œé€ æˆé‹ä½œä¸æ­£å¸¸ã€ç”šè‡³ææ¯€ Raspberry Piï¼Œå› æ­¤å¦‚æœä½ æ‰‹é‚Šçš„ä¼ºæœé¦¬é”ä¸¦æ²’æœ‰è¨»æ˜å‹è™Ÿï¼Œä¹Ÿæ²’æœ‰ç›¸é—œè¦æ ¼ï¼Œè«‹é¿å…ç›´æ¥é€£çµè‡³ Raspberry Piã€‚</p>
</li>
<li><p>åˆ©ç”¨æ–‡å­—ç·¨è¼¯å™¨ (å¦‚ nano) æ–°å¢ Python ç¨‹å¼<br><code>hardware_pwm_sg90.py</code></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">   <span class="token keyword">import</span> pigpio
   <span class="token keyword">import</span> time
   
   PWM_CONTROL_PIN <span class="token operator">=</span> <span class="token number">18</span>
   PWM_FREQ <span class="token operator">=</span> <span class="token number">50</span>
   STEP <span class="token operator">=</span> <span class="token number">15</span>
   
   pi <span class="token operator">=</span> pigpio<span class="token punctuation">.</span>pi<span class="token punctuation">(</span><span class="token punctuation">)</span>
   
   <span class="token keyword">def</span> <span class="token function">angle_to_duty_cycle</span><span class="token punctuation">(</span>angle<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
       duty_cycle <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">500</span> <span class="token operator">*</span> PWM_FREQ <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1900</span> <span class="token operator">*</span> PWM_FREQ <span class="token operator">*</span> angle <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token keyword">return</span> duty_cycle
   
   <span class="token keyword">try</span><span class="token punctuation">:</span>
       <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æŒ‰ä¸‹ Ctrl-C å¯åœæ­¢ç¨‹å¼'</span><span class="token punctuation">)</span>
       <span class="token keyword">for</span> angle <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">181</span><span class="token punctuation">,</span> STEP<span class="token punctuation">)</span><span class="token punctuation">:</span>
           dc <span class="token operator">=</span> angle_to_duty_cycle<span class="token punctuation">(</span>angle<span class="token punctuation">)</span>
           <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'è§’åº¦={: &gt;3}, å·¥ä½œé€±æœŸ={: &gt;6}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>angle<span class="token punctuation">,</span> dc<span class="token punctuation">)</span><span class="token punctuation">)</span>
           pi<span class="token punctuation">.</span>hardware_PWM<span class="token punctuation">(</span>PWM_CONTROL_PIN<span class="token punctuation">,</span> PWM_FREQ<span class="token punctuation">,</span> dc<span class="token punctuation">)</span>
           time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
       <span class="token keyword">for</span> angle <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span>STEP<span class="token punctuation">)</span><span class="token punctuation">:</span>
           dc <span class="token operator">=</span> angle_to_duty_cycle<span class="token punctuation">(</span>angle<span class="token punctuation">)</span>
           <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'è§’åº¦={: &gt;3}, å·¥ä½œé€±æœŸ={: &gt;6}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>angle<span class="token punctuation">,</span> dc<span class="token punctuation">)</span><span class="token punctuation">)</span>
           pi<span class="token punctuation">.</span>hardware_PWM<span class="token punctuation">(</span>PWM_CONTROL_PIN<span class="token punctuation">,</span> PWM_FREQ<span class="token punctuation">,</span> dc<span class="token punctuation">)</span>
           time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
       pi<span class="token punctuation">.</span>hardware_PWM<span class="token punctuation">(</span>PWM_CONTROL_PIN<span class="token punctuation">,</span> PWM_FREQ<span class="token punctuation">,</span> angle_to_duty_cycle<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
           <span class="token builtin">next</span>
   <span class="token keyword">except</span> KeyboardInterrupt<span class="token punctuation">:</span>
       <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'é—œé–‰ç¨‹å¼'</span><span class="token punctuation">)</span>
   <span class="token keyword">finally</span><span class="token punctuation">:</span>
       pi<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>PWM_CONTROL_PIN<span class="token punctuation">,</span> pigpio<span class="token punctuation">.</span>INPUT<span class="token punctuation">)</span>   
   ```  

<span class="token number">10</span><span class="token punctuation">.</span> ç¨‹å¼èªªæ˜å¦‚ä¸‹<span class="token punctuation">:</span>

<span class="token operator">-</span> ç¬¬ <span class="token number">1</span> è¡Œå¼•å…¥ pigpio å¥—ä»¶ï¼Œåœ¨é€™å€‹ç¯„ä¾‹ä¸­æˆ‘å€‘å°‡é€éé€™å€‹å¥—ä»¶ä½¿ç”¨ Raspberry Pi çš„ç¡¬é«” PWM åŠŸèƒ½ã€‚
<span class="token operator">-</span> ç¬¬ <span class="token number">4</span> è¡Œå®šç¾©æ§åˆ¶æ¥è…³æ‰€é€£çµä¹‹ Raspberry Pi è…³ä½ï¼Œæˆ‘å€‘é€£çµçš„æ˜¯å¯¦é«”ç·¨è™Ÿ <span class="token number">12</span> çš„è…³ä½ï¼Œå…¶ BCM ç·¨è™Ÿç‚º <span class="token number">18</span>ã€‚
<span class="token operator">-</span> ç¬¬ <span class="token number">5</span> è¡Œå®šç¾© PWM æ‰€ä½¿ç”¨çš„é »ç‡ã€‚
<span class="token operator">-</span> ç¬¬ <span class="token number">6</span> è¡Œå®šç¾©æ¯æ¬¡æ—‹è½‰çš„è§’åº¦ã€‚
<span class="token operator">-</span> ç¬¬ <span class="token number">8</span> è¡Œå®£å‘Š pigpio æ§åˆ¶ç‰©ä»¶ã€‚
<span class="token operator">-</span> ç¬¬ <span class="token number">10</span><span class="token operator">~</span><span class="token number">12</span> è¡Œå®šç¾©è§’åº¦èˆ‡å·¥ä½œé€±æœŸçš„å°æ‡‰é—œä¿‚ï¼Œä¹Ÿå°±æ˜¯é€™ç¯‡æ–‡ç« ä¸­çš„å…¬å¼ä¸‰ã€‚ä¸éå› ç‚º RPi<span class="token punctuation">.</span>GPIO æ‰€ä½¿ç”¨çš„å·¥ä½œé€±æœŸåƒæ•¸ç¯„åœç‚º <span class="token number">0</span> <span class="token operator">~</span> <span class="token number">100</span>ï¼Œè€Œ pigpio çš„ hardware_PWM å‡½å¼æ‰€ä½¿ç”¨çš„å·¥ä½œé€±æœŸåƒæ•¸ç¯„åœç‚º <span class="token number">0</span> <span class="token operator">~</span> <span class="token number">1000000</span>ï¼Œæ‰€ä»¥é ˆå°‡åŸå…¬å¼ä¹˜ä»¥ <span class="token number">10000</span>ã€‚
ç¬¬ <span class="token number">16</span><span class="token operator">~</span><span class="token number">25</span> è¡Œé€éå…©å€‹ <span class="token keyword">for</span> è¿´åœˆå°‡ SG90 ç”± <span class="token number">0</span> åº¦é€æ¬¡æ—‹è½‰è‡³ <span class="token number">180</span> åº¦ï¼Œä¹‹å¾Œå†é€æ¬¡è½‰å› <span class="token number">0</span> åº¦ã€‚
<span class="token operator">-</span> ç¬¬ <span class="token number">26</span> è¡Œå°‡ SG90 è»¸å¿ƒæ—‹è½‰è‡³ <span class="token number">90</span> åº¦ã€‚
<span class="token operator">-</span> ç¬¬ <span class="token number">27</span><span class="token operator">~</span><span class="token number">28</span> è¡ŒåŸ·è¡Œç„¡ä»»ä½•åŠŸèƒ½çš„è¿´åœˆï¼Œå…¶ç›®çš„æ˜¯è®“ SG90 çš„è»¸å¿ƒåœåœ¨ <span class="token number">90</span> åº¦çš„ä½ç½®ã€‚
<span class="token operator">-</span> ç¬¬ <span class="token number">32</span> è¡Œç¢ºå®šç¨‹å¼çµæŸå¾Œç¨‹å¼ä¸­æ‰€ä½¿ç”¨çš„è…³ä½æœƒå›åˆ°é è¨­ç‹€æ…‹ã€‚

<span class="token number">11</span><span class="token punctuation">.</span> ç¨‹å¼å®Œæˆå¾Œï¼Œè¼¸å…¥ä¸‹åˆ—æŒ‡ä»¤åŸ·è¡Œç¨‹å¼

    ```Shell
    python hardware_pwm_sg90<span class="token punctuation">.</span>py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</li>
</ol>
<h2 id="10-é–‹æ©Ÿè‡ªå‹•åŸ·è¡Œ-shell-ç¨‹å¼"><a href="#10-é–‹æ©Ÿè‡ªå‹•åŸ·è¡Œ-shell-ç¨‹å¼" class="headerlink" title="10. é–‹æ©Ÿè‡ªå‹•åŸ·è¡Œ shell ç¨‹å¼"></a>10. é–‹æ©Ÿè‡ªå‹•åŸ·è¡Œ <code>shell</code> ç¨‹å¼</h2><ol>
<li><p>ç›®çš„ï¼šæ¨¹è“æ´¾é–‹æ©Ÿæ™‚è‡ªå‹•åŸ·è¡ŒæŸäº›è…³æœ¬ï¼Œä¸ç”¨æ‰‹å‹•è¨­ç½®ï¼Œæ¸›å°‘éº»ç…©ã€‚</p>
</li>
<li><p>æ€è·¯ï¼šæ–°å»ºä¸€å€‹è‡ªå‹•å•Ÿå‹• <code>pigpio</code> æœå‹™çš„è…³æœ¬ pigpio.shï¼Œç„¶å¾Œæ·»åŠ åŸ·è¡Œå‘½ä»¤åˆ° /etc/rc.localæ–‡ä»¶ä¸­</p>
</li>
<li><p>å¯¦ç¾æ­¥é©Ÿ<br>3.1. æ–°å»ºä¸€å€‹ bash shell è…³æœ¬</p>
<pre><code> `touch /home/pi/source/pigpio.sh` </code></pre>
<p>3.2. å¾€ <code>pigpio.sh</code> è…³æœ¬æ·»åŠ å¦‚ä¸‹å…§å®¹</p>
   <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token string">"/home/pi/source"</span>

<span class="token function">sudo</span> <span class="token function">service</span> pigpiod start<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>3.3. çµ¦äºˆè…³æœ¬ <code>pigpiod.sh</code> è¨±å¯æ¬Šä¸¦åŸ·è¡Œï¼ŒæŸ¥çœ‹æ˜¯å¦èƒ½æ­£å¸¸åŸ·è¡Œ</p>
   <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">cd</span> /home/pi/source
$ <span class="token function">chmod</span> +x pigpiod.sh
$ <span class="token function">bash</span> ./pigpiod.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>3.4. åœ¨ <code>/etc/rc.local</code> æª”ä¸­æ·»åŠ åŸ·è¡ŒæŒ‡ä»¤ç¢¼å‘½ä»¤</p>
   <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">:</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$_IP</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token builtin class-name">printf</span> <span class="token string">"My IP address is %s<span class="token entity" title="\n">\n</span>"</span> <span class="token string">"<span class="token variable">$_IP</span>"</span>
<span class="token keyword">fi</span>

<span class="token function">bash</span>  ./home/pi/source/pigpiod.sh <span class="token comment">#æ·»åŠ é€™æ¢å‘½ä»¤ï¼Œè·¯å¾‘æ˜¯çµ•å°è·¯å¾‘</span>
<span class="token builtin class-name">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</li>
</ol>
<h2 id="11-é–‹æ©Ÿè‡ªå‹•åŸ·è¡Œ-python-ç¨‹å¼"><a href="#11-é–‹æ©Ÿè‡ªå‹•åŸ·è¡Œ-python-ç¨‹å¼" class="headerlink" title="11. é–‹æ©Ÿè‡ªå‹•åŸ·è¡Œ python ç¨‹å¼"></a>11. é–‹æ©Ÿè‡ªå‹•åŸ·è¡Œ <code>python</code> ç¨‹å¼</h2><h3 id="æ­¥é©Ÿæ‘˜è¦å¦‚ä¸‹"><a href="#æ­¥é©Ÿæ‘˜è¦å¦‚ä¸‹" class="headerlink" title="æ­¥é©Ÿæ‘˜è¦å¦‚ä¸‹ :"></a>æ­¥é©Ÿæ‘˜è¦å¦‚ä¸‹ :</h3><ol>
<li><code>Python</code> ç¨‹å¼ç¬¬ä¸€è¡Œè¦æ”¾ #!/usr/bin/python3 æŒ‡å®šåŸ·è¡Œä¹‹è§£è­¯å™¨ç‰ˆæœ¬</li>
<li>ç”¨ chmod æŒ‡ä»¤å°‡æ­¤ Python ç¨‹å¼æ”¹ç‚ºå¯åŸ·è¡Œ (+x), ä¾‹å¦‚ :<br><code>chmod +x /home/pi/test.py</code> </li>
<li>å»ºç«‹ bash shell ç¨‹å¼ <code>mypython</code>, <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/bin/bash</span>
<span class="token comment">### BEGIN INIT INFO</span>
<span class="token comment"># Provides:          mypython</span>
<span class="token comment"># Required-Start:    $syslog $network</span>
<span class="token comment"># Required-Stop:     $syslog $network</span>
<span class="token comment"># Default-Start:     2 3 4 5</span>
<span class="token comment"># Default-Stop:      0 1 6</span>
<span class="token comment"># Short-Description: starts the mypython</span>
<span class="token comment"># Description:       starts mypython using start-stop-daemon</span>
<span class="token comment">### END INIT INFO</span>

<span class="token comment"># /etc/init.d/mypython</span>
<span class="token comment"># 1.æ–°å¢æª”æ¡ˆæ¬Šé™ï¼šå¯ä»¥åŸ·è¡Œ</span>
<span class="token comment">#   sudo chmod +x /etc/init.d/mypython</span>
<span class="token comment"># 2.è¨­å®šé–‹æ©Ÿå•Ÿå‹•</span>
<span class="token comment">#   sudo update-rc.d mypython defaults 95</span>
<span class="token comment">#   (å¦‚æœè¦ç§»é™¤é–‹æ©Ÿå•Ÿå‹•ï¼šsudo update-rc.d mypython remove)</span>
<span class="token comment">#   ( mypython æœ‰ä¿®æ”¹çš„è©±ï¼Œè¦åŸ·è¡Œ systemctl daemon-reload )</span>
<span class="token comment"># 3.ä½¿ç”¨æŒ‡ä»¤ç¢¼å•Ÿå‹•ã€åœæ­¢æœå‹™</span>
<span class="token comment">#   sudo service mypython start</span>
<span class="token comment">#   sudo service mypython stop</span>

case <span class="token string">"$1"</span> <span class="token keyword">in</span>
    start<span class="token punctuation">)</span>
        echo <span class="token operator">-</span>n <span class="token string">"Starting python: "</span>
        echo <span class="token string">"---------------------------------------------------------------------------------"</span> <span class="token operator">&gt;&gt;</span><span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mypython
        date <span class="token operator">+</span><span class="token string">"! %Y/%m/%d %a %T : Starting python ."</span> <span class="token operator">&gt;&gt;</span><span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mypython
        echo start
        <span class="token comment">#cd /home/pi/inv/</span>
        <span class="token comment">#./mqtt-ledv4-test.py &gt;&gt; /var/log/inv.log &amp;</span>
        cd <span class="token operator">/</span>home<span class="token operator">/</span>pi<span class="token operator">/</span>source<span class="token operator">/</span>
        <span class="token punctuation">.</span><span class="token operator">/</span>test<span class="token punctuation">.</span>py <span class="token operator">&amp;</span>
        echo <span class="token string">"Done."</span>
        echo <span class="token string">""</span>
        date <span class="token operator">+</span><span class="token string">"! %Y/%m/%d %a %T : Finished."</span> <span class="token operator">&gt;&gt;</span><span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mypython
        echo <span class="token string">"---------------------------------------------------------------------------------"</span> <span class="token operator">&gt;&gt;</span><span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mypython
        touch <span class="token operator">/</span>var<span class="token operator">/</span>lock<span class="token operator">/</span>subsys<span class="token operator">/</span>python
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop<span class="token punctuation">)</span>
        echo <span class="token operator">-</span>n <span class="token string">"Shutting Down python Listeners: "</span>
        echo <span class="token string">"---------------------------------------------------------------------------------"</span> <span class="token operator">&gt;&gt;</span><span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mypython
        date <span class="token operator">+</span><span class="token string">"! %Y/%m/%d %a %T : Shutting Down python."</span> <span class="token operator">&gt;&gt;</span><span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mypython
        echo <span class="token string">"python"</span>
        <span class="token comment">#killall -9 mqtt-ledv4-test.py</span>
        killall <span class="token operator">-</span><span class="token number">9</span> test<span class="token punctuation">.</span>py
        echo <span class="token string">"Done."</span>
        rm <span class="token operator">-</span>f <span class="token operator">/</span>var<span class="token operator">/</span>lock<span class="token operator">/</span>subsys<span class="token operator">/</span>python
        echo <span class="token string">"Done."</span>
        date <span class="token operator">+</span><span class="token string">"! %Y/%m/%d %a %T : Finished."</span> <span class="token operator">&gt;&gt;</span><span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mypython
        echo <span class="token string">"---------------------------------------------------------------------------------"</span> <span class="token operator">&gt;&gt;</span><span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mypython
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token operator">*</span><span class="token punctuation">)</span>
        echo <span class="token string">"Usage: mypython { start | stop | restart }"</span>
        exit <span class="token number">1</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
esac
exit <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li>ä¿®æ”¹å…¶ä¸­ç¬¬ 38 è¡Œèˆ‡ç¬¬ 51 è¡Œçš„ Python ç¨‹å¼æª”åç‚ºè‡ªå·±è¦åŸ·è¡Œä¹‹ Python ç¨‹å¼æª”å, ä¾‹å¦‚ test.py, ç„¶å¾Œå°‡æ­¤ <code>mypython</code> ç¨‹å¼æ”¾åœ¨ /etc/init.d/ ç›®éŒ„ä¸‹, ç”¨ chmod æŒ‡ä»¤å°‡å…¶æ¬Šé™æ”¹ç‚ºå¯åŸ·è¡Œ :<br><code>sudo chmod +x /etc/init.d/mypython</code> </li>
<li>è¨­å®š <code>mypython</code> é–‹æ©Ÿè‡ªå‹•åŸ·è¡Œ :<br><code>sudo update-rc.d mypython defaults 95</code></li>
<li>å•Ÿå‹•æœå‹™ :<br><code>sudo service mypython start</code></li>
<li>é‡é–‹æ©Ÿæª¢æŸ¥ Python ç¨‹å¼æ˜¯å¦æœ‰åœ¨åŸ·è¡Œ<br><code>ps -ax|grep mypython</code></li>
</ol>
<h3 id="å–æ¶ˆè‡ªå‹•åŸ·è¡Œç¨‹åº"><a href="#å–æ¶ˆè‡ªå‹•åŸ·è¡Œç¨‹åº" class="headerlink" title="å–æ¶ˆè‡ªå‹•åŸ·è¡Œç¨‹åº :"></a>å–æ¶ˆè‡ªå‹•åŸ·è¡Œç¨‹åº :</h3><ol>
<li>ç§»é™¤é–‹æ©Ÿå•Ÿå‹•è¨­å®šï¼š<br><code>sudo update-rc.d mypython remove</code></li>
<li>åœæ­¢æœå‹™ :<br><code>sudo service mypython stop</code></li>
<li>åˆªé™¤ mypython :<br><code>sudo rm /etc/init.d/mypython</code></li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">allen</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        æ–‡ç« é€£çµ:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://blog.allen5183.synology.me/iot/20210602-iot/">http://blog.allen5183.synology.me/iot/20210602-iot/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        ç‰ˆæ¬Šè²æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥è²æ˜å¤–ï¼Œå‡æ¡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    æˆæ¬Šåˆç´„ã€‚è½‰è¼‰è«‹æ³¨æ˜ä¾†æº
                    <a href="/about" target="_blank">allen</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>è¤‡è£½æˆåŠŸï¼Œè«‹éµå¾ªæœ¬æ–‡çš„è½‰è¼‰è¦å‰‡</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/iot/">
                                    <span class="chip bg-color">iot</span>
                                </a>
                            
                                <a href="/tags/wiot/">
                                    <span class="chip bg-color">wiot</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,wechat,linkedin" data-wechat-qrcode-helper="<p>å¾®ä¿¡æƒä¸€æƒå³å¯åˆ†äº«ï¼</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>è©•è«–</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: 'e484b237dd5bd59118c0',
        clientSecret: '7071e58c699bdbdce68a1d36b72b4184f24e98b1',
        repo: 'hexo-matery',
        owner: 'allen-5183',
        admin: ["allen-5183"],
        id: '2021-06-02T12-23-55',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>

    

    

    

    

    

    

        

     <article id="prenext-posts" class="prev-next articles">
         <div class="row article-row">
             
             <div class="article col s12 m6" data-aos="fade-up">
                 <div class="article-badge left-badge text-color">
                     <i class="fas fa-chevron-left"></i>&nbsp;ä¸Šä¸€ç¯‡</div>
                 <div class="card">
                     <a href="/iot/20210602-iot/">
                         <div class="card-image">
                             
                             
                             <img src="/medias/loading.gif" data-original="/medias/featureimages/14.jpg" class="responsive-img" alt="ç‰©è¯ç¶²ç¶œåˆæ‡‰ç”¨(äºŒ)">
                             
                             <span class="card-title">ç‰©è¯ç¶²ç¶œåˆæ‡‰ç”¨(äºŒ)</span>
                         </div>
                     </a>
                     <div class="card-content article-content">
                         <div class="summary block-with-text">
                             
                                 0. èª²ç¨‹æº–å‚™
é›²ç«¯ç¡¬ç¢Ÿ
ç”Ÿæ´»æ™ºæ…§å±‹å±•ç¤º

è¬›ç¾©

1. ç¡¬é«”å»ºç½®1.1 é…ç·šåœ–
æ¨¹è“æ´¾è…³ä½åœ–


æ¨¹è“æ´¾èˆ‡å…¶ä»–è£ç½®é€£æ¥è…³ä½åœ–



PI3 B+ è…³ä½
PI3 B+ åŠŸèƒ½æè¿°
å…¶ä»–è£ç½®è…³ä½



PI3 B+ 18
GPIO 24
Buz
                             
                         </div>
                         <div class="publish-info">
                             <span class="publish-date">
                                 <i class="far fa-clock fa-fw icon-date"></i>2021-06-02
                             </span>
                             <span class="publish-author">
                                 
                                 <i class="fas fa-bookmark fa-fw icon-category"></i>
                                 
                                 <a href="/categories/iot/" class="post-category">
                                         iot
                                     </a>
                                 
                                 
                             </span>
                         </div>
                     </div>
                     
                     <div class="card-action article-tags">
                         
                         <a href="/tags/iot/">
                             <span class="chip bg-color">iot</span>
                         </a>
                        
                         <a href="/tags/wiot/">
                             <span class="chip bg-color">wiot</span>
                         </a>
                        
                     </div>
                     
                 </div>
             </div>
             
             
             <div class="article col s12 m6" data-aos="fade-up">
                 <div class="article-badge right-badge text-color">
                     ä¸‹ä¸€ç¯‡&nbsp;<i class="fas fa-chevron-right"></i>
                 </div>
                 <div class="card">
                     <a href="/php/20210408-php-basic/">
                         <div class="card-image">
                             
                             
                        <img src="/medias/loading.gif" data-original="/medias/featureimages/3.jpg" class="responsive-img" alt="PHP åŸºç¤ç¯‡">
                        
                        <span class="card-title">PHP åŸºç¤ç¯‡</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            PHP åŸºç¤1. php ç°¡ä»‹â€ƒâ€ƒPHPï¼Œå³ PHP: Hypertext Preprocessorï¼Œæ˜¯ä¸€ç¨®è¢«å»£æ³›æ‡‰ç”¨çš„é–‹æºé€šç”¨æŒ‡ä»¤ç¢¼èªè¨€ï¼Œå°¤å…¶é©ç”¨æ–¼ Web é–‹ç™¼ä¸¦å¯åµŒå…¥ HTML ä¸­ã€‚â€ƒâ€ƒå®ƒçš„èªæ³•åˆ©ç”¨äº† Cã€Java å’Œ Perlï¼Œæ˜“æ–¼
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-04-07
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/php/" class="post-category">
                                    php
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/php/">
                        <span class="chip bg-color">php</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
      </div>
    </article>

</div>



<!-- ä»£ç¢¼å¡ŠåŠŸèƒ½ä¾è³´ -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- ä»£ç¢¼èªè¨€ -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- ä»£ç¢¼å¡Šè¤‡è£½ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ä»£ç¢¼å¡Šæ”¶ç¸® -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- ä»£ç¢¼å¡ŠæŠ˜è¡Œ -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;ç›®éŒ„</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC æ‡¸æµ®æŒ‰éˆ•. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ä¿®å¾©æ–‡ç« å¡ç‰‡ div çš„å¯¬åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // åˆ‡æ›TOCç›®éŒ„å±•é–‹æ”¶ç¸®çš„ç›¸é—œæ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='true'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='false'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">

            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="/about" target="_blank">Allen Tai</a>
            <br>

            

            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;ç¸½è¨ªå•é‡:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;æ¬¡
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;ç¸½è¨ªå•äººæ•¸:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;äºº
            </span>
            
            <br>
            
            <br>
            
        </div>

        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/allen-5183" class="tooltipped" target="_blank" data-tooltip="allen's GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:allen5183@gmail.com" class="tooltipped" target="_blank" data-tooltip="éƒµä»¶è¯ç¹«æˆ‘" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="https://www.facebook.com/allen5183" class="tooltipped" target="_blank" data-tooltip="é—œæ³¨æˆ‘çš„ 
Facebook: https://www.facebook.com/allen5183" data-position="top" data-delay="50">
        <i class="fab fa-facebook-f"></i>
    </a>




    <a href="" class="tooltipped" target="_blank"
data-tooltip="é—œæ³¨æˆ‘çš„ Twitter: https://twitter.com/allen5183" data-position="top" data-delay="50">                                                                                                               
<i class="fab fa-twitter"></i>
    </a>



                                                                                                                                                                                   
<a href="https://plus.google.com/allen5183" class="tooltipped" target="_blank"                                                                                                                                    
data-tooltip="é—œæ³¨æˆ‘çš„ Google: https://plus.google.com/allen5183" data-position="top" data-delay="50">                                                                                                              
<i class="fab fa-google-plus-g"></i>                                                                                                                                                                                          
</a>                                                                                                                                                                                                            
   





<!--

    <a href="https://twitter.com/allen5183" class="tooltipped" target="_blank" data-tooltip="é—œæ³¨æˆ‘çš„Twitter: https://twitter.com/allen5183" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>









-->


    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS è¨‚é–±" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>

<!-- ç‡ˆç± å·¦ -->
<!-- <div class="deng-box"> -->
<!--   <div class="deng"> -->
<!--     <div class="xian"></div> -->
<!--       <div class="deng-a"> -->
<!--        <div class="deng-b"><div class="deng-t">é›™å</div></div> -->
<!--        </div>   -->
<!--        <div class="shui shui-a">  -->
<!--          <div class="shui-c"></div> -->
<!--             <div class="shui-b"></div> -->
<!--        </div> -->
<!--    </div> -->
<!-- </div> -->



<!-- ç‡ˆç± å³ -->
<!-- <div class="deng-box1"> -->
<!--    <div class="deng"> -->
<!--        <div class="xian"></div> -->
<!--        <div class="deng-a"> -->
<!--            <div class="deng-b"><div class="deng-t">åŒæ…¶</div></div>  -->
<!--        </div>  -->
<!--        <div class="shui shui-a"> -->
<!--            <div class="shui-c"></div>  -->
<!--            <div class="shui-b"></div>  -->
<!--        </div> -->
<!--    </div>  -->
<!-- </div>  -->

</footer>

<div class="progress-bar"></div>

<!-- é–’èŠéº¼  -->
<script>
    var xlm_wid='16495';
    var xlm_url='https://www.xianliao.me/';
</script>
<script type='text/javascript' charset='UTF-8' src='https://www.xianliao.me/embed.js'></script>




    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è«‹è¼¸å…¥æœç´¢çš„é—œéµå­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- å›åˆ°é ‚éƒ¨æŒ‰éˆ• -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    
    <script>
        (function (i, s, o, g, r, a, m) {
            i["DaoVoiceObject"] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o), m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            a.charset = "utf-8";
            m.parentNode.insertBefore(a, m)
        })(window, document, "script", ('https:' == document.location.protocol ? 'https:' : 'http:') +
            "//widget.daovoice.io/widget/6984b559.js", "daovoice")
        daovoice('init', {
            app_id: "22dc2875"
        });
        daovoice('update');
    </script>
    

    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/nito.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true,"scale":0.5},"react":{"opacity":0.7},"log":false});</script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var i=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,e,a=0;a<r.length;a++)t=r[a],e=void 0,0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>

</html>
